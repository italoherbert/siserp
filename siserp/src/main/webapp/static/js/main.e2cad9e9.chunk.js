(this["webpackJsonpsiserp-react"]=this["webpackJsonpsiserp-react"]||[]).push([[0],{143:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(4),c=a.n(s),i=(a(143),a(7)),o=a(8),l=a(10),d=a(9),j=a(216),u=a(217),h=a(131),b=a(224),m=a(220),O=a(132),p=a(75),x=a(76),f=a.n(x),g=new(function(){function e(){Object(i.a)(this,e),this.token=null,this.usuario=null}return Object(o.a)(e,[{key:"paginaElemento",value:function(){return document.getElementById("pagina")}},{key:"menuNavegElemento",value:function(){return document.getElementById("menu-naveg")}},{key:"rootElemento",value:function(){return document.getElementById("root")}},{key:"scrollTo",value:function(e){var t=document.querySelector("#"+e);t&&t.scrollIntoView()}},{key:"showLoadingSpinner",value:function(){f()("#carregando").show()}},{key:"hideLoadingSpinner",value:function(){f()("#carregando").hide()}},{key:"showHide",value:function(e){var t=document.getElementById(e);"hidden"===t.style.visibility?(t.style.display="block",t.style.visibility="visible"):(t.style.display="none",t.style.visibility="hidden")}},{key:"formataData",value:function(e){return null===e||void 0===e||""===e?"Formato de data n\xe3o reconhecido":p(e).format("DD/MM/YYYY")}},{key:"formataReal",value:function(e){var t=parseFloat(e);if(0===t)return"R$ 0,00";if(Math.abs(t)>=1){var a=""+parseInt(100*t);return"R$ "+a.substring(0,a.length-2)+","+a.substring(a.length-2,a.length)}return"R$ "+(""+t).substring(0,t<0?5:4).replace(".",",")}},{key:"paraFloat",value:function(e){return!0===isNaN((""+e).replace(",","."))?e:""+e==="0"?0:parseFloat((""+e).replace(",","."))}},{key:"formataFloat",value:function(e){if(""+e==="0")return"0";var t=(""+e).split("."),a=0;return 2===t.length&&(a=parseInt(t[1])),0===a?t[0]:t[0]+","+t[1]}},{key:"trataRespostaNaoOk",value:function(e,t){400===e.status?e.json().then((function(e){null==e.mensagem?t.setState({erroMsg:"Mensagem de erro n\xe3o encontrada pelo c\xf3digo recebido. Codigo="+e.codigo}):t.setState({erroMsg:e.mensagem})})):t.setState({erroMsg:this.getMensagemErro(e.status)})}},{key:"trataRespostaNaoOkCBK",value:function(e,t){var a=this;400===e.status?e.json().then((function(e){"function"==typeof t&&t.call(a,e.mensagem)})):"function"==typeof t&&t.call(this,this.getMensagemErro(e.status))}},{key:"getMensagemErro",value:function(e){switch(e){case 401:case 403:return"Voc\xea n\xe3o tem permiss\xe3o para acessar esse recurso";case 404:return"Recurso n\xe3o encontrado no servidor.";case 500:return"Erro interno no servidor.";default:return"Erro desconhecido"}}}]),e}()),v=a(223),y=a(0),N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={msgId:"msg-"+(new Date).getTime()},r}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){g.scrollTo(this.state.msgId)}},{key:"render",value:function(){var e=this.state.msgId;return null==this.props.msg?Object(y.jsx)("span",{}):Object(y.jsx)("div",{children:Object(y.jsx)(v.a,{id:e,color:this.props.cor,children:this.props.msg})})}}]),a}(n.a.Component),k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){f()("#carregando").hide()}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{id:"carregando",style:{position:"fixed",margin:"10em 46%",zIndex:"1000"},children:Object(y.jsx)("div",{className:"spinner-border",children:Object(y.jsx)("span",{className:"sr-only"})})}),Object(y.jsx)("div",{id:"menu-naveg"}),Object(y.jsx)("div",{className:"mx-5 my-2 p-4 bg-light rounded",style:{minHeight:"30em"},children:Object(y.jsx)("div",{id:"pagina"})}),Object(y.jsx)("div",{className:"bg-dark p-3 text-center text-light",children:Object(y.jsx)("h5",{children:"Produzido por \xcdtalo Herbert"})})]})}}]),a}(n.a.Component),C=a(221),S=a(222),M=a(219),T=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.cnpj=n.a.createRef(),r.inscricaoEstadual=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&(this.cnpj.current.value=this.props.cnpj,this.inscricaoEstadual.current.value=this.props.inscricaoEstadual)}},{key:"salvar",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/sede/salva",{method:"PUT",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({cnpj:this.cnpj.current.value,inscricaoEstadual:this.inscricaoEstadual.current.value})}).then((function(e){200===e.status?t.setState({infoMsg:"Dados da sede salvos com sucesso."}):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaSedeDetalhes",value:function(){c.a.render(Object(y.jsx)(R,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"card-title text-center",children:"Registro de sede"}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},className:"container",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"CNPJ: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.cnpj,name:"cnpj"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Inscri\xe7\xe3o estadual: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.inscricaoEstadual,name:"cnpj"})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",className:"my-1",children:"Salvar"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaSedeDetalhes(t)},children:"Ir para detalhes"})]})})]})]})})}}]),a}(n.a.Component),R=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,sede:{}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/sede/get",{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({sede:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(T,{op:"editar",cnpj:this.state.sede.cnpj,inscricaoEstadual:this.state.sede.inscricaoEstadual}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.sede,r=t.erroMsg,n=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Dados da sede"}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados gerais"}),Object(y.jsxs)("div",{className:"display: inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"CNPJ: "}),Object(y.jsx)("span",{className:"text-info",children:a.cnpj})]}),Object(y.jsxs)("div",{className:"display: inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Inscri\xe7\xe3o Estadual: "}),Object(y.jsx)("span",{className:"text-info",children:a.inscricaoEstadual})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar sede"})}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n})]})]})]})})}}]),a}(n.a.Component),L=a(218),F=a(15),D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,usuarioGrupos:[]},r.nome=n.a.createRef(),r.telefone=n.a.createRef(),r.email=n.a.createRef(),r.ender=n.a.createRef(),r.numero=n.a.createRef(),r.logradouro=n.a.createRef(),r.bairro=n.a.createRef(),r.cidade=n.a.createRef(),r.uf=n.a.createRef(),r.usuarioGrupo=n.a.createRef(),r.username=n.a.createRef(),r.password=n.a.createRef(),r.password2=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.carregaGrupos(),"editar"===this.props.op&&this.carregaFuncionario()}},{key:"carregaFuncionario",value:function(){var e=this;fetch("/api/funcionario/get/"+this.props.funcId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.nome.current.value=t.pessoa.nome,e.telefone.current.value=t.pessoa.telefone,e.email.current.value=t.pessoa.email,e.ender.current.value=t.pessoa.endereco.ender,e.numero.current.value=t.pessoa.endereco.numero,e.logradouro.current.value=t.pessoa.endereco.logradouro,e.bairro.current.value=t.pessoa.endereco.bairro,e.cidade.current.value=t.pessoa.endereco.cidade,e.uf.current.value=t.pessoa.endereco.uf,e.username.current.value=t.usuario.username,e.usuarioGrupo.current.value=t.usuario.grupo.nome,e.setState({})})):g.trataRespostaNaoOk(t,e)}))}},{key:"carregaGrupos",value:function(){var e=this;fetch("/api/usuario/grupo/lista",{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){t.json().then((function(t){e.setState({usuarioGrupos:t})}))}))}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/funcionario/atualiza/"+this.props.funcId,a="PUT"):(t="/api/funcionario/registra",a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({pessoa:{nome:this.nome.current.value,telefone:this.telefone.current.value,email:this.email.current.value,endereco:{ender:this.ender.current.value,numero:this.numero.current.value,bairro:this.bairro.current.value,cidade:this.cidade.current.value,uf:this.uf.current.value,logradouro:this.logradouro.current.value}},usuario:{username:this.username.current.value,password:this.password.current.value,grupo:{nome:this.usuarioGrupo.current.value}}})}).then((function(e){200===e.status?r.setState({infoMsg:"Funcionario salvo com sucesso."}):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaFuncionarios",value:function(){c.a.render(Object(y.jsx)(E,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.usuarioGrupos;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Registro de funcionarios"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Nome: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nome,name:"nome"})]})})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Telefone: "}),Object(y.jsx)(m.a.Control,{type:"tel",ref:this.telefone,name:"tel"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"E-Mail: "}),Object(y.jsx)(m.a.Control,{type:"email",ref:this.email,name:"email"})]})})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Endere\xe7o"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Ender:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.ender,name:"ender"})]})})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Numero:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.numero,name:"numero"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Logradouro:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.logradouro,name:"logradouro"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Bairro:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.bairro,name:"bairro"})]})})]}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Cidade:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.cidade,name:"cidade"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"UF:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.uf,name:"uf"})]})})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Usuario:"}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Nome de usu\xe1rio:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.username,name:"username"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Grupos de usu\xe1rio:"}),Object(y.jsxs)("select",{name:"usuarioGrupo",ref:this.usuarioGrupo,className:"form-control",children:[Object(y.jsx)("option",{value:"NONE",children:"Selecione um grupo!"},"0"),n.map((function(e,t){return Object(y.jsx)("option",{value:e,children:e},t+1)}))]})]})})]}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a.Label,{children:"Senha:"}),Object(y.jsx)(m.a.Control,{type:"password",ref:this.password,name:"password"})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a.Label,{children:"Repita a senha:"}),Object(y.jsx)(m.a.Control,{type:"password",ref:this.password2,name:"password2"})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaFuncionarios(t)},children:"Ir para funcionarios"})]})})]})]})]})]})})}}]),a}(n.a.Component),I=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,funcionario:{pessoa:{endereco:{}},usuario:{}}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/funcionario/get/"+this.props.funcId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({funcionario:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(D,{op:"editar",funcId:this.props.funcId}),g.paginaElemento())}},{key:"paraTelaFuncionarios",value:function(){c.a.render(Object(y.jsx)(E,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.funcionario,r=t.erroMsg,n=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados do funcion\xe1rio"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Nome: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.nome})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Telefone: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.telefone})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"E-Mail: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.email})]})})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Endere\xe7o"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Ender: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.ender})]})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Numero: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.numero})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Logradouro: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.logradouro})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Bairro: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.bairro})]})]}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Cidade: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.cidade})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"UF: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.uf})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados usuario"}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Username: "}),Object(y.jsx)("span",{className:"text-info",children:a.usuario.username})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Tipo: "}),Object(y.jsx)("span",{className:"text-info",children:a.usuario.tipo})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n}),Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar funcionario"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaFuncionarios(t)},children:"Ir para funcionarios"})]})]})]})]})})}}]),a}(n.a.Component),E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,funcionarios:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.nomeIni=n.a.createRef(),r.usernameIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.nomeIni.current.value="*",this.usernameIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/funcionario/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:this.nomeIni.current.value,usernameIni:this.usernameIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({funcionarios:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhum funcion\xe1rio encontrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"detalhes",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(I,{funcId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/funcionario/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Funcionario removido com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"paraTelaRegistro",value:function(){c.a.render(Object(y.jsx)(D,{op:"cadastrar"}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.funcionarios,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de funcionario"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o funcionario selecionado?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaRegistro(t)},children:"Registrar novo funcion\xe1rio"})})})}),Object(y.jsx)("h4",{className:"text-center col-md-12",children:"Lista de Funcionarios"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Nome"}),Object(y.jsx)("th",{children:"Nome de usu\xe1rio"}),Object(y.jsx)("th",{children:"Tipo"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.pessoa.nome}),Object(y.jsx)("td",{children:t.usuario.username}),Object(y.jsx)("td",{children:t.usuario.tipo}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-6",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar funcionarios"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nomeIni,name:"nomeIni"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome de usu\xe1rio:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.usernameIni,name:"usernameIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})})})]})}}]),a}(n.a.Component),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.empresa=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&(this.empresa.current.value=this.props.empresa)}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/fornecedor/atualiza/"+this.props.fornecedorId,a="PUT"):(t="/api/fornecedor/registra",a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({empresa:this.empresa.current.value})}).then((function(e){200===e.status?r.setState({infoMsg:"Fornecedor salvo com sucesso."}):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaFornecedores",value:function(){c.a.render(Object(y.jsx)(B,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Registro de fornecedores"}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Empresa: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.empresa,name:"empresa"})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaFornecedores(t)},children:"Ir para fornecedores"})})})})]})]})})}}]),a}(n.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,fornecedor:{}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.fornecedorId;g.showLoadingSpinner(),fetch("/api/fornecedor/get/"+t,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({fornecedor:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(P,{op:"editar",fornecedorId:this.props.fornecedorId,empresa:this.state.fornecedor.empresa}),g.paginaElemento())}},{key:"paraTelaFornecedores",value:function(){c.a.render(Object(y.jsx)(B,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.fornecedor,r=t.erroMsg,n=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Dados do fornecedor"}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados gerais"}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Empresa: "}),Object(y.jsx)("span",{className:"text-info",children:a.empresa})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n}),Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar fornecedor"})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaFornecedores(t)},children:"Ir para fornecedores"})]})]})]})})}}]),a}(n.a.Component),B=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,fornecedores:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.empresaIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.empresaIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/fornecedor/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({empresaIni:this.empresaIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({fornecedores:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhum fornecedor registrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"detalhes",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(w,{fornecedorId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/fornecedor/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Fornecedor removido com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"paraTelaRegistro",value:function(){c.a.render(Object(y.jsx)(P,{op:"cadastrar"}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.fornecedores,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de fornecedor"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o fornecedor selecionado?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaRegistro(t)},children:"Registrar novo fornecedor"})})})}),Object(y.jsx)("h4",{className:"text-center",children:"Lista de Fornecedores"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Nome da empresa"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.empresa}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar fornecedores"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Empresa:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.empresaIni,name:"empresaIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",className:"mb-3",children:"Filtrar"})]})]})})})]})}}]),a}(n.a.Component),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.descricao=n.a.createRef(),r.precoUnitCompra=n.a.createRef(),r.precoUnitVenda=n.a.createRef(),r.unidade=n.a.createRef(),r.codigoBarras=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&this.carrega()}},{key:"carrega",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/produto/get/"+this.props.produtoId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.descricao.current.value=t.descricao,e.precoUnitCompra.current.value=t.precoUnitCompra,e.precoUnitVenda.current.value=t.precoUnitVenda,e.unidade.current.value=t.unidade,e.codigoBarras.current.value=t.codigoBarras})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"salvar",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/produto/salva",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({codigoBarras:this.codigoBarras.current.value,descricao:this.descricao.current.value,precoUnitCompra:g.paraFloat(this.precoUnitCompra.current.value),precoUnitVenda:g.paraFloat(this.precoUnitVenda.current.value),unidade:this.unidade.current.value})}).then((function(e){200===e.status?(t.setState({infoMsg:"Produto cadastrado com sucesso."}),"function"===typeof t.props.registrou&&t.props.registrou.call(t)):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"buscar",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});var a=this.codigoBarras.value;g.showLoadingSpinner(),fetch("/api/produto/busca/"+a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){t.codigoBarras.current.value=e.codigoBarras,t.descricao.current.value=e.descricao,t.precoUnitCompra.current.value=e.precoUnitCompra,t.precoUnitVenda.current.value=e.precoUnitVenda,t.unidade.current.value=e.unidade,t.setState({})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaProdutos",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(J,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-sm-2"}),Object(y.jsx)(h.a,{className:"col-sm-8",children:Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:"Salvar produto"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricao,name:"descricao"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Codigo de barras: "}),Object(y.jsxs)(u.a,{className:"display-inline",children:[Object(y.jsx)(h.a,{className:"col-sm-10",children:Object(y.jsx)(m.a.Control,{type:"text",ref:this.codigoBarras,name:"codigoBarras"})}),Object(y.jsx)(h.a,{className:"col-sm-2",children:Object(y.jsx)(O.a,{type:"button",variant:"primary",onClick:function(t){return e.buscar(t)},children:"Buscar"})})]})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Pre\xe7o Compra por Unidade: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.precoUnitCompra,name:"precoUnitCompra"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Pre\xe7o Venda por Unidade: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.precoUnitVenda,name:"precoUnitVenda"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Unidade: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.unidade,name:"unidade"})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaProdutos(t)},children:"Para tela de produtos"})]})})})]})})}}]),a}(n.a.Component),V=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,produto:{subcategorias:[]}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.produtoId;g.showLoadingSpinner(),fetch("/api/produto/get/"+t,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({produto:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(G,{op:"editar",titulo:"Altere a produto",produtoId:this.props.produtoId}),g.paginaElemento())}},{key:"paraTelaProdutos",value:function(){c.a.render(Object(y.jsx)(J,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.produto,r=t.erroMsg,n=t.infoMsg;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Dados do produto"}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Descri\xe7\xe3o: "}),Object(y.jsx)("span",{className:"text-info",children:a.descricao})]}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Codigo barras: "}),Object(y.jsx)("span",{className:"text-info",children:a.codigoBarras})]}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Pre\xe7o compra: "}),Object(y.jsx)("span",{className:"text-info",children:a.precoUnitCompra})]}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Pre\xe7o venda: "}),Object(y.jsx)("span",{className:"text-info",children:a.precoUnitVenda})]}),Object(y.jsxs)("div",{className:"display-inline",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Unidade: "}),Object(y.jsx)("span",{className:"text-info",children:a.unidade})]}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{type:"submit",variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar produto"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaProdutos(t)},children:"Ir para produtos"})]})})})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n})]})}}]),a}(n.a.Component),A=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.descricao=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&(this.descricao.current.value=this.props.descricao)}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/categoria/atualiza/"+this.props.categoriaId,a="PUT"):(t="/api/categoria/registra",a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricao:this.descricao.current.value})}).then((function(e){200===e.status?(r.setState({infoMsg:"Categoria cadastrada com sucesso."}),"function"===typeof r.props.registrou&&r.props.registrou.call()):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaCategoriaDetalhes",value:function(){c.a.render(Object(y.jsx)(z,{categoriaId:this.props.categoriaId}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsxs)("div",{children:[Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:this.props.titulo}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricao,name:"descricao"})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})]})}),"editar"===this.props.op&&Object(y.jsxs)("div",{children:[Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCategoriaDetalhes(t)},children:"Ir para detalhes"})})})})]})]})}}]),a}(n.a.Component),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.descricao=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&(this.descricao.current.value=this.props.descricao)}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/subcategoria/atualiza/"+this.props.subcategoriaId,a="PUT"):(t="/api/subcategoria/registra/"+this.props.categoriaId,a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricao:this.descricao.current.value})}).then((function(e){200===e.status?(r.setState({infoMsg:"Subcategoria salva com sucesso."}),"function"===typeof r.props.registrou&&r.props.registrou.call()):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaCategoria",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(z,{categoriaId:this.props.categoriaId}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:this.props.titulo}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricao,name:"descricao"})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"}),"editar"===this.props.op&&Object(y.jsxs)("div",{children:[Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCategoria(t)},children:"Ir para categoria"})]})]})})}}]),a}(n.a.Component),z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,categoria:{subcategorias:[]},remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.subcatDescricaoIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.carregar(null),this.subcatDescricaoIni.current.value="*"}},{key:"carregar",value:function(e){var t=this;null!=e&&e.preventDefault();var a=this.props.categoriaId;g.showLoadingSpinner(),fetch("/api/categoria/get/"+a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){t.setState({categoria:e})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(A,{op:"editar",titulo:"Altere a categoria",categoriaId:this.props.categoriaId,descricao:this.state.categoria.descricao}),g.paginaElemento())}},{key:"filtrarSubcategorias",value:function(e,t){var a=this;null!=e&&e.preventDefault();var r=this.props.categoriaId;this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/subcategoria/filtra/"+r,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricaoIni:this.subcatDescricaoIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({categoria:{subcategorias:e}}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma subcategoria encontrada pelos crit\xe9rios de busca informados."})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"editarSubcategoria",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(U,{op:"editar",titulo:"Altere a subcategoria",categoriaId:this.state.categoria.id,subcategoriaId:t.id,descricao:t.descricao}),g.paginaElemento())}},{key:"removerSubcategoriaSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.removerSubcategoria(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"removerSubcategoria",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/subcategoria/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?(a.setState({infoMsg:"Subcategoria removida com \xeaxito!"}),a.filtrarSubcategorias(e,null)):g.trataRespostaNaoOk(t,a),g.hideLoadingSpinner()}))}},{key:"paraTelaCategorias",value:function(){c.a.render(Object(y.jsx)(q,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.categoria,r=t.erroMsg,n=t.infoMsg,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de subcategoria"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover a subcategoria selecionada?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)("h4",{className:"text-center",children:"Dados do categoria"}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)("div",{className:"inline-block",children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Descri\xe7\xe3o: "}),Object(y.jsx)("span",{className:"text-info",children:a.descricao})]}),Object(y.jsx)("br",{}),Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar categoria"})})]})})}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{className:"text-center",children:"Lista de Subcategorias"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Editar"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:a.subcategorias.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.editarSubcategoria(a,t)},children:"editar"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSubcategoriaSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtro de categorias"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrarSubcategorias(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.subcatDescricaoIni,name:"subcatDescricaoIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})}),Object(y.jsx)(h.a,{children:Object(y.jsx)(U,{op:"cadastrar",titulo:"Registre nova subcategoria",categoriaId:this.props.categoriaId,registrou:function(){return e.filtrarSubcategorias(null,!1)}})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCategorias(t)},children:"Ir para categorias"})})})})]})}}]),a}(n.a.Component),q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={addErroMsg:null,addInfoMsg:null,erroMsg:null,infoMsg:null,categorias:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.descricaoIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.descricaoIni.current.value="*",this.filtrar(null,!0)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/categoria/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricaoIni:this.descricaoIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({categorias:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma categoria registrada!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"detalhes",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(z,{categoriaId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/categoria/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Categoria removida com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.categorias,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de categoria"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover a categoria selecionada?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)("h4",{className:"text-center",children:"Lista de Categorias"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtro de categorias"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricaoIni,name:"descricaoIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})}),Object(y.jsx)(h.a,{children:Object(y.jsx)(A,{op:"cadastrar",titulo:"Cadastre nova categoria",registrou:function(){return e.filtrar(null,!1)}})})]})]})}}]),a}(n.a.Component),J=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,produtos:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.descricaoIni=n.a.createRef(),r.codigoBarras=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.descricaoIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});var r=this.descricaoIni.current.value;g.showLoadingSpinner(),fetch("/api/produto/filtra/"+r,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){a.setState({produtos:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma produto encontrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"buscar",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});var a=this.codigoBarras.current.value;g.showLoadingSpinner(),fetch("/api/produto/busca/"+a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){t.state.produtos.push(e),0===e.length&&t.setState({infoMsg:"Nenhuma produto encontrado!"})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"detalhes",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(V,{produtoId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/produto/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Produto removido com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"paraCadastroForm",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(G,{op:"cadastrar",titulo:"Cadastre um novo produto"}),g.paginaElemento())}},{key:"paraCategorias",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(q,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.produtos,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de produto"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o produto selecionado?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{className:"float-start",variant:"primary",onClick:function(t){return e.paraCategorias(t)},children:"Categorias"}),Object(y.jsx)(O.a,{className:"float-end",variant:"primary",onClick:function(t){return e.paraCadastroForm(t)},children:"Cadastre um novo produto"})]})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Produtos"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"C\xf3digo de barras"}),Object(y.jsx)("th",{children:"Pre\xe7o compra"}),Object(y.jsx)("th",{children:"Pre\xe7o venda"}),Object(y.jsx)("th",{children:"Quantidade"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:t.codigoBarras}),Object(y.jsx)("td",{children:g.formataReal(t.precoUnitCompra)}),Object(y.jsx)("td",{children:g.formataReal(t.precoUnitVenda)}),Object(y.jsxs)("td",{children:[g.formataFloat(t.quantidade)," ",t.unidade]}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar produtos"}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-sm-6",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricaoIni,name:"descricaoIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})}),Object(y.jsx)(h.a,{className:"col-sm-6",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.buscar(t)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Codigo de barras:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.codigoBarras,name:"codigoBarras"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Buscar"})]})})]})]})})})]})})]})}}]),a}(n.a.Component),Q=a(28),H=a.n(Q),Y=a(20),$=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={id:"input-dropdown"+(new Date).getTime()+Math.random()},r.texto=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){document.getElementById(this.state.id).style.display="none",document.getElementById(this.state.id).style.visibility="hidden"}},{key:"onChangeTexto",value:function(e){var t;e.preventDefault(),document.getElementById(this.state.id).style.display="block",document.getElementById(this.state.id).style.visibility="visible",t=null!==this.props.referencia&&void 0!==this.props.referencia?this.props.referencia.current.value:this.texto.current.value,"function"===typeof this.props.carregaItens&&(this.props.carregaItens.call(this,t),this.setState({}))}},{key:"onClickMostraEscondeDropdown",value:function(e){e.preventDefault();var t,a=document.getElementById(this.state.id);"visible"===a.style.visibility?(a.style.display="none",a.style.visibility="hidden"):(a.style.display="block",a.style.visibility="visible","function"===typeof this.props.carregaItens&&(t=null!==this.props.referencia&&void 0!==this.props.referencia?this.props.referencia.current.value:this.texto.current.value,this.props.carregaItens.call(this,t),this.setState({})))}},{key:"onClickItem",value:function(e,t,a){e.preventDefault(),document.getElementById(this.state.id).style.display="none",document.getElementById(this.state.id).style.visibility="hidden",null!==this.props.referencia&&void 0!==this.props.referencia?this.props.referencia.current.value=t:this.texto.current.value=t,"function"===typeof this.props.carregaItens&&(this.props.carregaItens.call(this,t),this.setState({})),"function"===typeof this.props.itemClicado&&(this.props.itemClicado.call(this,t,a),this.setState({}))}},{key:"render",value:function(){var e,t=this,a=this.state.id;return e=null!==this.props.referencia&&void 0!==this.props.referencia?this.props.referencia:this.texto,Object(y.jsxs)("div",{className:"dropdown",children:[Object(y.jsx)("input",{type:"text",ref:e,name:"texto",onChange:function(e){return t.onChangeTexto(e)},onClick:function(e){return t.onClickMostraEscondeDropdown(e)},className:"form-control"}),Object(y.jsx)("div",{id:a,className:"dropdown-menu","aria-labelledby":"texto",children:this.props.itens.map((function(e,a){return Object(y.jsx)("button",{className:"dropdown-item",onClick:function(r){return t.onClickItem(r,e,a)},children:e},a)}))})]})}}]),a}(n.a.Component),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,categoria:"",subcategoria:"",categoriasLista:[],subcategoriasLista:[]},r.categoria=n.a.createRef(),r.subcategoria=n.a.createRef(),r}return Object(o.a)(a,[{key:"addCategoria",value:function(e){e.preventDefault(),this.setState({erroMsg:null});var t=this.state.categoria,a=this.state.subcategoria;if(0!==t.length)if(0!==a.length){for(var r=null,n=0;null===r&&n<this.props.categorias.length;n++){var s=this.props.categorias[n];s.descricao.toLowerCase()===t.toLowerCase()&&(r=s)}var c=!1;if(null===r)r={descricao:t,subcategorias:[]},this.props.categorias.push(r);else for(var i=0;!1===c&&i<r.subcategorias.length;i++){r.subcategorias[i].descricao.toLowerCase()===a.toLowerCase()&&(c=!0)}!1===c?(r.subcategorias.push({descricao:a}),this.categoria.current.value="",this.subcategoria.current.value="",this.setState({categoria:"",subcategoria:""})):this.setState({erroMsg:"J\xe1 existe inserida combina\xe7\xe3o de categoria e subcategoria informadas."})}else this.setState({erroMsg:"A subcategoria (valor) \xe9 um campo obrigat\xf3rio"});else this.setState({erroMsg:"A categoria \xe9 um campo obrigat\xf3rio"})}},{key:"removeCategoria",value:function(e,t,a){e.preventDefault();for(var r=!1,n=this.props.categorias.length,s=0;!1===r&&s<n;s++){var c=this.props.categorias[s];if(c.descricao.toLowerCase()===t.toLowerCase()){for(var i=c.subcategorias.length,o=0;!1===r&&o<i;o++){c.subcategorias[o].descricao.toLowerCase()===a.toLowerCase()&&(c.subcategorias.splice(o,1),r=!0),c.subcategorias.length<=0&&this.props.categorias.splice(s,1)}r=!0}}this.setState({})}},{key:"categoriaOnChange",value:function(e){var t=this;this.setState({categoria:e}),0!==e.length&&fetch("/api/categoria/filtra/limit/5",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricaoIni:e})}).then((function(e){200===e.status&&e.json().then((function(e){t.setState({categoriasLista:[]});for(var a=0;a<e.length;a++)t.state.categoriasLista.push(e[a].descricao);t.setState({})}))}))}},{key:"subcategoriaOnChange",value:function(e){var t=this;this.setState({subcategoria:e}),0!==e.length&&fetch("/api/subcategoria/filtra/limit/"+this.state.categoria+"/5",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({descricaoIni:e})}).then((function(e){200===e.status&&e.json().then((function(e){t.setState({subcategoriasLista:[]});for(var a=0;a<e.length;a++)t.state.subcategoriasLista.push(e[a].descricao);t.setState({})}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.categoriasLista,n=t.subcategoriasLista;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de categorias"}),Object(y.jsx)("div",{className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Catetoria"}),Object(y.jsx)("th",{children:"Subcategoria"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:this.props.categorias.map((function(t,a){return t.subcategorias.map((function(r,n){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:r.descricao}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removeCategoria(a,t.descricao,r.descricao)},children:"remover"})})]},a*t.subcategorias.length+n)}))}))})]})}),Object(y.jsxs)(b.a,{className:"p-3 my-2",children:[Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(m.a.Group,{className:"my-2",children:Object(y.jsxs)(u.a,{children:[Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"Categoria"}),Object(y.jsx)($,{referencia:this.categoria,itens:r,carregaItens:function(t){return e.categoriaOnChange(t)}})]}),Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"Subcategoria (Valor)"}),Object(y.jsx)($,{referencia:this.subcategoria,itens:n,carregaItens:function(t){return e.subcategoriaOnChange(t)}})]}),Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"+"}),Object(y.jsx)("br",{}),Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.addCategoria(t)},children:"Adicionar categoria"})]})]})})]})]})}}]),a}(n.a.Component),X=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,codbarInfoMsg:null,categorias:[]},r.descricao=n.a.createRef(),r.codigoBarras=n.a.createRef(),r.precoUnitCompra=n.a.createRef(),r.precoUnitVenda=n.a.createRef(),r.unidade=n.a.createRef(),r.estoqueQuantidade=n.a.createRef(),r.paraAddQuantidade=n.a.createRef(),r}return Object(o.a)(a,[{key:"addProduto",value:function(e){if(e.preventDefault(),this.setState({erroMsg:null,infoMsg:null,codbarInfoMsg:null}),0!==this.descricao.current.value.trim().length)if(0!==this.codigoBarras.current.value.trim().length)if(0!==this.precoUnitCompra.current.value.trim().length)if(0!==this.precoUnitVenda.current.value.trim().length)if(0!==this.paraAddQuantidade.current.value.trim().length){var t={descricao:this.descricao.current.value,codigoBarras:this.codigoBarras.current.value,precoUnitCompra:g.paraFloat(this.precoUnitCompra.current.value),precoUnitVenda:g.paraFloat(this.precoUnitVenda.current.value),unidade:this.unidade.current.value,paraAddQuantidade:g.paraFloat(this.paraAddQuantidade.current.value),categorias:this.state.categorias};this.limpaProdutoForm(),"function"===typeof this.props.produtoAdicionado&&this.props.produtoAdicionado.call(this,t)}else this.setState({erroMsg:"A quantidade \xe9 um campo de preenchiento obrigat\xf3rio."});else this.setState({erroMsg:"O pre\xe7o unit\xe1rio de venda \xe9 um campo de preenchiento obrigat\xf3rio."});else this.setState({erroMsg:"O pre\xe7o unit\xe1rio de compra \xe9 um campo de preenchiento obrigat\xf3rio."});else this.setState({erroMsg:"O c\xf3digo de barras \xe9 um campo de preenchiento obrigat\xf3rio."});else this.setState({erroMsg:"A descri\xe7\xe3o \xe9 um campo de preenchiento obrigat\xf3rio."})}},{key:"limpaProdutoForm",value:function(){this.descricao.current.value="",this.codigoBarras.current.value="",this.precoUnitCompra.current.value="",this.precoUnitVenda.current.value="",this.unidade.current.value="",this.paraAddQuantidade.current.value="",this.setState({categorias:[]})}},{key:"buscar",value:function(e){var t=this;e.preventDefault(),this.setState({codbarInfoMsg:null});var a=this.codigoBarras.current.value;fetch("/api/produto/busca/"+a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){t.descricao.current.value=e.descricao,t.precoUnitCompra.current.value=g.formataFloat(e.precoUnitCompra),t.precoUnitVenda.current.value=g.formataFloat(e.precoUnitVenda),t.unidade.current.value=e.unidade,t.estoqueQuantidade.current.value=g.formataFloat(e.quantidade),t.setState({categorias:e.categorias})})):g.trataRespostaNaoOkCBK(e,(function(e){t.setState({codbarInfoMsg:e})}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.codbarInfoMsg,s=t.categorias;return Object(y.jsxs)(m.a,{onSubmit:function(t){return e.addProduto(t)},children:[Object(y.jsxs)(Y.d,{forceRenderTabPanel:!0,children:[Object(y.jsxs)(Y.b,{children:[Object(y.jsx)(Y.a,{children:"Dados do produto"}),Object(y.jsx)(Y.a,{children:"Categorias"})]}),Object(y.jsx)(Y.c,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados do produto"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Descri\xe7\xe3o: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.descricao,name:"descricao"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Codigo de barras: "}),Object(y.jsxs)(u.a,{className:"display-inline mb-2",children:[Object(y.jsx)(h.a,{className:"col-sm-10",children:Object(y.jsx)(m.a.Control,{type:"text",ref:this.codigoBarras,name:"codigoBarras"})}),Object(y.jsx)(h.a,{className:"col-sm-2",children:Object(y.jsx)(O.a,{type:"button",variant:"primary",onClick:function(t){return e.buscar(t)},children:"Buscar"})})]}),Object(y.jsx)(N,{cor:"info",msg:n})]}),Object(y.jsx)(m.a.Group,{className:"mb-2",children:Object(y.jsxs)(u.a,{children:[Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"Pre\xe7o Compra: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.precoUnitCompra,name:"precoUnitCompra"})]}),Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"Pre\xe7o Venda: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.precoUnitVenda,name:"precoUnitVenda"})]}),Object(y.jsxs)(h.a,{className:"col-sm-4",children:[Object(y.jsx)(m.a.Label,{children:"Unidade: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.unidade,name:"unidade"})]})]})}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Quantidade em estoque: "}),Object(y.jsx)(m.a.Control,{type:"text",disabled:!0,ref:this.estoqueQuantidade,name:"estoqueQuantidade"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Quantidade para adicionar: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.paraAddQuantidade,name:"paraAddQuantidade"})]})]})}),Object(y.jsx)(Y.c,{children:Object(y.jsx)(K,{categorias:s})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",className:"my-3",children:"Adicionar produto"})]})}}]),a}(n.a.Component),W=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,fornecedoresLista:[]},r}return Object(o.a)(a,[{key:"fornecedorOnChange",value:function(e){var t=this;fetch("/api/fornecedor/filtra/limit/5",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({empresaIni:e})}).then((function(e){200===e.status&&e.json().then((function(e){t.setState({fornecedoresLista:[]});for(var a=0;a<e.length;a++)t.state.fornecedoresLista.push(e[a].empresa);t.setState({})}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.fornecedoresLista,s=this.props.fornecedorEmpresaRef;return Object(y.jsxs)(m.a,{onSubmit:function(t){return e.addFornecedor(t)},children:[Object(y.jsxs)(b.a,{className:"p-3 mb-2",children:[Object(y.jsx)("h4",{className:"card-title",children:"Configurar fornecedor"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Fornecedor: "}),Object(y.jsx)($,{referencia:s,itens:n,carregaItens:function(t){return e.fornecedorOnChange(t)}})]})]}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r})]})}}]),a}(n.a.Component),Z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={vencimento:10},r}return Object(o.a)(a,[{key:"calcularParcelas",value:function(e){e.preventDefault();var t=this.props,a=t.parcelas,r=t.produtos;a.splice(0,a.length);for(var n=0,s=0;s<r.length;s++){var c=r[s];n+=parseFloat(c.precoUnitCompra)*parseFloat(c.paraAddQuantidade)}for(var i=this.props.quantParcelasRef.current.value,o=n/i,l=1;l<=i;l++){var d=p(new Date).add(l,"M"),j=p(d).add(this.state.vencimento,"d");a.push({valor:o,dataPagamento:d,dataVencimento:j})}this.props.config.valorTotal=n,this.setState({})}},{key:"render",value:function(){var e=this,t=this.props,a=t.parcelas,r=t.config,n=t.quantParcelasRef;return Object(y.jsxs)("div",{className:"p-3",children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Parcelas"}),Object(y.jsx)("div",{className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Valor"}),Object(y.jsx)("th",{children:"Data pagamento"}),Object(y.jsx)("th",{children:"Data vencimento"})]})}),Object(y.jsx)("tbody",{children:a.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:g.formataReal(e.valor)}),Object(y.jsx)("td",{children:g.formataData(e.dataPagamento)}),Object(y.jsx)("td",{children:g.formataData(e.dataVencimento)})]},t)}))})]})}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.calcularParcelas(t)},children:[Object(y.jsx)(m.a.Group,{className:"my-2",children:Object(y.jsxs)(m.a.Label,{children:["Valor total: \xa0",Object(y.jsx)("span",{className:"text-primary",children:g.formataReal(r.valorTotal)})]})}),Object(y.jsxs)(m.a.Group,{className:"my-2",children:[Object(y.jsx)(m.a.Label,{children:"Numero de parcelas"}),Object(y.jsx)(m.a.Control,{type:"number",ref:n,name:"quantParcelas"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Calcular parcelas"})]})]})}}]),a}(n.a.Component),_=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={infoMsg:null,erroMsg:null,produtos:[],parcelas:[],geraParcelasConfig:{valorTotal:0}},r.quantParcelasRef=n.a.createRef(),r.fornecedorEmpresaRef=n.a.createRef(),r}return Object(o.a)(a,[{key:"produtoAdicionado",value:function(e){this.state.produtos.push(e),this.setState({parcelas:[]}),g.scrollTo("produtos-tbl-pnl")}},{key:"removeProduto",value:function(e,t){e.preventDefault(),this.state.produtos.splice(t,1),this.setState({parcelas:[]})}},{key:"registrarCompra",value:function(e){var t=this,a=this.state,r=a.produtos,n=a.parcelas;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});for(var s=[],c=0;c<r.length;c++){var i=r[c];s.push({precoUnitario:i.precoUnitCompra,quantidade:i.paraAddQuantidade,produto:{descricao:i.descricao,codigoBarras:i.codigoBarras,precoUnitCompra:i.precoUnitCompra,precoUnitVenda:i.precoUnitVenda,unidade:i.unidade,categorias:i.categorias,quantidade:i.paraAddQuantidade}})}for(var o=[],l=0;l<n.length;l++){var d=n[l];o.push({valor:d.valor,dataPagamento:g.formataData(d.dataPagamento),dataVencimento:g.formataData(d.dataVencimento)})}g.showLoadingSpinner(),fetch("/api/compra/registra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({dataCompra:g.formataData(new Date),fornecedor:{empresa:this.fornecedorEmpresaRef.current.value},itensCompra:s,parcelas:o})}).then((function(e){200===e.status?(t.fornecedorEmpresaRef.current.value="",t.quantParcelasRef.current.value="",t.setState({infoMsg:"Compra registrada com \xeaxito",produtos:[],parcelas:[],geraParcelasConfig:{valorTotal:0}})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaCompras",value:function(){c.a.render(Object(y.jsx)(te,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoMsg,r=t.erroMsg,n=t.produtos,s=t.parcelas,c=t.geraParcelasConfig;return Object(y.jsxs)("div",{children:[Object(y.jsxs)(Y.d,{forceRenderTabPanel:!0,children:[Object(y.jsxs)(Y.b,{children:[Object(y.jsx)(Y.a,{children:"Produtos"}),Object(y.jsx)(Y.a,{children:"Fornecedor"}),Object(y.jsx)(Y.a,{children:"Parcelas"})]}),Object(y.jsxs)(Y.c,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Produtos"}),Object(y.jsx)("div",{id:"produtos-tbl-pnl",className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Codigo de Barras"}),Object(y.jsx)("th",{children:"Quantidade"}),Object(y.jsx)("th",{children:"Categorias"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:t.codigoBarras}),Object(y.jsxs)("td",{children:[g.formataFloat(t.paraAddQuantidade)," ",t.unidade]}),Object(y.jsx)("td",{children:Object(y.jsx)("select",{children:t.categorias.map((function(e,t){return e.subcategorias.map((function(a,r){return Object(y.jsx)("option",{children:a.descricao},n.length+t*e.subcategorias.length+r)}))}))})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.removeProduto(t,a)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("div",{className:"my-3",children:Object(y.jsx)(X,{produtos:n,produtoAdicionado:function(t){return e.produtoAdicionado(t)}})})]}),Object(y.jsx)(Y.c,{children:Object(y.jsx)(W,{fornecedorEmpresaRef:this.fornecedorEmpresaRef})}),Object(y.jsx)(Y.c,{children:Object(y.jsx)(Z,{produtos:n,parcelas:s,config:c,quantParcelasRef:this.quantParcelasRef})})]}),Object(y.jsx)("hr",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:a}),Object(y.jsx)(m.a,{className:"text-center",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.registrarCompra(t)},children:"Registrar compra"})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCompras(t)},children:"Ir para tela de compras"})})})]})}}]),a}(n.a.Component),ee=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={infoMsg:null,erroMsg:null,compra:{parcelas:[],itens:[],fornecedor:{empresa:""}},total:0,valorPago:0,debito:0},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/compra/get/"+this.props.compraId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){for(var a=0,r=0,n=0;n<t.parcelas.length;n++){var s=g.paraFloat(t.parcelas[n].valor);"true"===t.parcelas[n].paga&&(r+=s),a+=s}var c=a-r;e.setState({compra:t,total:a,valorPago:r,debito:c})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"pagarParcela",value:function(e,t){}},{key:"paraTelaCompras",value:function(){c.a.render(Object(y.jsx)(te,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoMsg,r=t.erroMsg,n=t.compra,s=t.total,c=t.valorPago,i=t.debito;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados da compra"}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{children:["Data de compra: \xa0 ",Object(y.jsx)("span",{className:"text-info",children:n.dataCompra})]}),Object(y.jsxs)("div",{children:["Fornecedor: \xa0 ",Object(y.jsx)("span",{className:"text-info",children:n.fornecedor.empresa})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(Y.d,{children:[Object(y.jsxs)(Y.b,{children:[Object(y.jsx)(Y.a,{children:"Produtos"}),Object(y.jsx)(Y.a,{children:"Parcelas"})]}),Object(y.jsx)(Y.c,{children:Object(y.jsx)("div",{className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Codigo de barras"}),Object(y.jsx)("th",{children:"Valor Unit\xe1rio"}),Object(y.jsx)("th",{children:"Quantidade comprada"})]})}),Object(y.jsx)("tbody",{children:n.itens.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.id}),Object(y.jsx)("td",{children:e.produto.descricao}),Object(y.jsx)("td",{children:e.produto.codigoBarras}),Object(y.jsx)("td",{children:g.formataReal(e.precoUnitario)}),Object(y.jsx)("td",{children:g.formataFloat(e.quantidade)})]},t)}))})]})})}),Object(y.jsxs)(Y.c,{children:[0===n.parcelas.length?Object(y.jsx)(N,{cor:"info",msg:"Nenhuma parcela registrada para esta compra!"}):Object(y.jsx)("span",{}),Object(y.jsx)("div",{className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Valor"}),Object(y.jsx)("th",{children:"Data de pagamento"}),Object(y.jsx)("th",{children:"Data de vencimento"}),Object(y.jsx)("th",{children:"Situa\xe7\xe3o"})]})}),Object(y.jsx)("tbody",{children:n.parcelas.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:g.formataReal(e.valor)}),Object(y.jsx)("td",{children:e.dataPagamento}),Object(y.jsx)("td",{children:e.dataVencimento}),Object(y.jsx)("td",{className:"true"===e.paga?"text-primary":"text-danger",children:"true"===e.paga?"Paga":"Em d\xe9bito"})]},t)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsxs)(m.a.Group,{style:{fontSize:"1.6em"},children:[Object(y.jsxs)(m.a.Label,{children:["Total: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(s)})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Valor pago: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(c)})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["D\xe9bito: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(i)})]})})]})]})]})]}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:a})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCompras(t)},children:"Ir para tela de compras"})})})})]})}}]),a}(n.a.Component),te=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,compras:[],dataIni:new Date,dataFim:new Date,remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),fetch("/api/compra/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({dataIni:g.formataData(this.state.dataIni),dataFim:g.formataData(this.state.dataFim)})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({compras:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma compra encontrada pelos crit\xe9rios de busca informados!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"changeDataIni",value:function(e){this.setState({dataIni:e})}},{key:"changeDataFim",value:function(e){this.setState({dataFim:e})}},{key:"detalhes",value:function(e,t){c.a.render(Object(y.jsx)(ee,{compraId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t,a){var r=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/compra/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(r.filtrar(null,!1),r.setState({infoMsg:"Compra deletada com \xeaxito."})):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraRegistroForm",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(_,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.compras,s=t.dataIni,c=t.dataFim,i=t.remocaoModalVisivel,o=t.remocaoModalCancelaFunc,l=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:i,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de compra"})}),Object(y.jsxs)(F.a.Body,{children:["Tem certeza que deseja remover a compra selecionada? ",Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"Aten\xe7\xe3o:"})," Ao escolher remover a compra, esteja ciente que ser\xe1 atualizado o estoque com a subtra\xe7\xe3o das unidades de produto componentes da compra!"]}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return o()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return l()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraRegistroForm(t)},children:"Registre uma nova compra"})})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Compras"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Data compra"}),Object(y.jsx)("th",{children:"Valor total"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.dataCompra}),Object(y.jsx)("td",{children:g.formataReal(t.debitoTotal)}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar compras"}),Object(y.jsx)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-sm-4",children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de in\xedcio: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:s,onChange:function(t){return e.changeDataIni(t)},locale:"pt",name:"dataIni",dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{className:"col-sm-4",children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de fim: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:c,onChange:function(t){return e.changeDataFim(t)},locale:"pt",name:"dataFim",minDate:s,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsxs)(h.a,{className:"col-md-4",children:[Object(y.jsx)("div",{className:"mb-2",children:"\xa0"}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"}),Object(y.jsx)("br",{})]})]})})]})})})]})}}]),a}(n.a.Component),ae=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.nome=n.a.createRef(),r.telefone=n.a.createRef(),r.email=n.a.createRef(),r.ender=n.a.createRef(),r.numero=n.a.createRef(),r.logradouro=n.a.createRef(),r.bairro=n.a.createRef(),r.cidade=n.a.createRef(),r.uf=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op&&this.carregaCliente()}},{key:"carregaCliente",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/cliente/get/"+this.props.clienteId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.nome.current.value=t.pessoa.nome,e.telefone.current.value=t.pessoa.telefone,e.email.current.value=t.pessoa.email,e.ender.current.value=t.pessoa.endereco.ender,e.numero.current.value=t.pessoa.endereco.numero,e.logradouro.current.value=t.pessoa.endereco.logradouro,e.bairro.current.value=t.pessoa.endereco.bairro,e.cidade.current.value=t.pessoa.endereco.cidade,e.uf.current.value=t.pessoa.endereco.uf,e.setState({})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/cliente/atualiza/"+this.props.clienteId,a="PUT"):(t="/api/cliente/registra",a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({pessoa:{nome:this.nome.current.value,telefone:this.telefone.current.value,email:this.email.current.value,endereco:{ender:this.ender.current.value,numero:this.numero.current.value,bairro:this.bairro.current.value,cidade:this.cidade.current.value,uf:this.uf.current.value,logradouro:this.logradouro.current.value}}})}).then((function(e){200===e.status?r.setState({infoMsg:"Cliente salvo com sucesso."}):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaClientes",value:function(){c.a.render(Object(y.jsx)(ne,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Registro de cliente"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Nome: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nome,name:"nome"})]})})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Telefone: "}),Object(y.jsx)(m.a.Control,{type:"tel",ref:this.telefone,name:"tel"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"E-Mail: "}),Object(y.jsx)(m.a.Control,{type:"email",ref:this.email,name:"email"})]})})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Endere\xe7o"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Ender:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.ender,name:"ender"})]})})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Numero:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.numero,name:"numero"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Logradouro:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.logradouro,name:"logradouro"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Bairro:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.bairro,name:"bairro"})]})})]}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Cidade:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.cidade,name:"cidade",size:"30"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"UF:"}),Object(y.jsx)(m.a.Control,{type:"texto",ref:this.uf,name:"uf",size:"10"})]})})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})})})]})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaClientes(t)},children:"Ir para clientes"})})})})]})}}]),a}(n.a.Component),re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,cliente:{pessoa:{endereco:{}}}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/cliente/get/"+this.props.clienteId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({cliente:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(ae,{op:"editar",clienteId:this.props.clienteId}),g.paginaElemento())}},{key:"paraTelaClientes",value:function(){c.a.render(Object(y.jsx)(ne,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.cliente,r=t.erroMsg,n=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)("h4",{className:"text-center",children:"Dados do cliente"}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Dados gerais"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Nome: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.nome})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Telefone: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.telefone})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"E-Mail: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.email})]})})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{className:"card-title",children:"Endere\xe7o"}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Ender: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.ender})]})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Numero: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.numero})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Logradouro: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.logradouro})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Bairro: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.bairro})]})]}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"Cidade: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.cidade})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"text-dark font-weight-bold",children:"UF: "}),Object(y.jsx)("span",{className:"text-info",children:a.pessoa.endereco.uf})]})]})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:n}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.editar(t)},children:"Editar cliente"})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaClientes(t)},children:"Ir para clientes"})]})})]})]})]})})}}]),a}(n.a.Component),ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,clientes:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.nomeIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.nomeIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/cliente/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:this.nomeIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({clientes:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhum cliente encontrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"detalhes",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(re,{clienteId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/cliente/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.setState({infoMsg:"Cliente removido com \xeaxito!"}),a.filtrar(null,!1)):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"paraTelaRegistro",value:function(){c.a.render(Object(y.jsx)(ae,{op:"cadastrar"}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.clientes,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de cliente"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o cliente selecionado?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaRegistro(t)},children:"Registrar novo cliente"})})})}),Object(y.jsx)("h4",{className:"text-center col-md-12",children:"Lista de Clientes"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Nome"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.pessoa.nome}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-6",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar clientes"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nomeIni,name:"nomeIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})})})]})}}]),a}(n.a.Component),se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={infoMsg:null,erroMsg:null,itens:[],formasPag:[],quantValorPadrao:1,clientesNomeLista:[],clienteId:-1,clienteNome:"",incluirCliente:!1,subtotal:0,desconto:0,total:0,troco:0},r.codigoBarras=n.a.createRef(),r.desconto=n.a.createRef(),r.formaPag=n.a.createRef(),r.valorPago=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.carregaFormasPagamento()}},{key:"carregaFormasPagamento",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/pagamento/formas/",{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({formasPag:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"addItemVenda",value:function(e){var t=this,a=this.codigoBarras.current.value;this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/produto/busca/"+a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(r){200===r.status?r.json().then((function(r){t.state.itens.unshift({codigoBarras:a,descricao:r.descricao,categorias:r.categorias,precoUnitario:r.precoUnitVenda,unidade:r.unidade,estoqueQuantidade:r.quantidade,quantidade:1}),t.codigoBarras.current.value="",t.calcularTotal(e),g.scrollTo("produtos-tbl-pnl"),t.setState({})})):g.trataRespostaNaoOk(r,t),g.hideLoadingSpinner()}))}},{key:"removerItemVenda",value:function(e,t){e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),this.state.itens.splice(t,1),this.calcularTotal(e),this.setState({})}},{key:"efetuarVenda",value:function(e){var t=this,a=this.state.itens;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});for(var r=[],n=0;n<a.length;n++){var s=parseFloat(a[n].quantidade);if(!0===isNaN(s))return void this.setState({erroMsg:"Quantidade em formato inv\xe1lido. Quantidade="+s});var c=parseFloat(a[n].estoqueQuantidade);if(s>c){var i=g.formataFloat(s),o=g.formataFloat(c);return void this.setState({erroMsg:"N\xe3o h\xe1 quantidade suficiente em estoque. ( "+i+">"+o+"  ), Produto= "+a[n].descricao})}r.push({codigoBarras:a[n].codigoBarras,quantidade:a[n].quantidade,precoUnitario:g.paraFloat(a[n].precoUnitario)})}g.showLoadingSpinner(),fetch("/api/venda/efetua/"+g.usuario.id,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({subtotal:g.paraFloat(this.state.subtotal),desconto:g.paraFloat(this.state.desconto),formaPag:this.formaPag.current.value,incluirCliente:this.state.incluirCliente,clienteNome:this.state.clienteNome,itensVenda:r})}).then((function(e){200===e.status?(t.valorPago.current.value="",t.desconto.current.value="",t.formaPag.current.value="",t.setState({infoMsg:"Venda registrada com \xeaxito",itens:[],subtotal:0,total:0,troco:0})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"quantidadeItemProdOnChange",value:function(e,t){var a=this.state.itens;this.setState({erroMsg:null,infoMsg:null});var r=g.paraFloat(e.target.value);if(a[t].quantidade=r,e.target.value.trim().length>0){var n=parseFloat(a[t].estoqueQuantidade);if(!1===isNaN(r))if(r<=n)this.calcularTotal(e),this.setState({itens:a});else{var s=a[t].descricao;this.setState({erroMsg:"Quantidade informada maior que a quantidade em estoque. Produto="+s})}else this.setState({itens:a})}}},{key:"incluirClienteOnChange",value:function(e){this.setState({incluirCliente:e.target.checked})}},{key:"clienteNomeOnChange",value:function(e){var t=this;this.setState({clienteNome:e}),fetch("/api/cliente/filtra/limit/5",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:e})}).then((function(e){200===e.status&&e.json().then((function(e){t.setState({clientesNomeLista:[]});for(var a=0;a<e.length;a++)t.state.clientesNomeLista.push(e[a].pessoa.nome);t.setState({})}))}))}},{key:"calcularTotal",value:function(e){var t=this.state.itens,a=parseFloat(g.paraFloat(this.desconto.current.value));!0===isNaN(a)?a=0:a/=100;for(var r=0;r<t.length;r++){if(isNaN(t[r].precoUnitario))return void this.setState({erroMsg:"Pre\xe7o unit\xe1rio em formato inv\xe1lido"});var n=parseFloat(t[r].quantidade);if(!0===isNaN(n))return;if(n>t[r].estoqueQuantidade)return void this.setState({erroMsg:"Quantidade maior que a quantidade em estoque para o produto: "+t[r].descricao})}for(var s=0,c=0;c<t.length;c++)s+=parseFloat(t[c].quantidade)*parseFloat(t[c].precoUnitario);var i=s*(1-a),o=parseFloat(g.paraFloat(this.valorPago.current.value)),l=0;isNaN(o)||(l=g.paraFloat(this.valorPago.current.value)-i),this.setState({desconto:a,subtotal:s,total:i,troco:l})}},{key:"paraTelaVendas",value:function(){c.a.render(Object(y.jsx)(oe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoMsg,r=t.erroMsg,n=t.itens,s=t.formasPag,c=t.quantValorPadrao,i=t.subtotal,o=t.total,l=t.troco,d=t.clientesNomeLista,j=t.incluirCliente;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Produtos"}),Object(y.jsx)("div",{id:"produtos-tbl-pnl",className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Codigo de Barras"}),Object(y.jsx)("th",{children:"Pre\xe7o unit\xe1rio"}),Object(y.jsx)("th",{children:"Quant. Estoque"}),Object(y.jsx)("th",{children:"Quantidade"}),Object(y.jsx)("th",{children:"Unidade"}),Object(y.jsx)("th",{children:"Categorias"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.descricao}),Object(y.jsx)("td",{children:t.codigoBarras}),Object(y.jsx)("td",{children:g.formataReal(t.precoUnitario)}),Object(y.jsx)("td",{children:g.formataFloat(t.estoqueQuantidade)}),Object(y.jsx)("td",{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(m.a.Control,{type:"text",onChange:function(t){return e.quantidadeItemProdOnChange(t,a)},defaultValue:c})})}),Object(y.jsx)("td",{children:t.unidade}),Object(y.jsx)("td",{children:Object(y.jsx)("select",{children:t.categorias.map((function(e,t){return e.subcategorias.map((function(e,a){return Object(y.jsx)("option",{value:e.descricao,children:e.descricao},t)}))}))})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.removerItemVenda(t,a)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:a}),Object(y.jsx)("div",{className:"p-3 bg-light",children:Object(y.jsx)(m.a.Group,{children:Object(y.jsxs)("div",{style:{fontSize:"1.6em"},children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Subtotal: \xa0 ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(i)})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Desconto (%): \xa0"}),Object(y.jsx)("input",{className:"border-light rounded text-danger",type:"text",ref:this.desconto,name:"desconto",onChange:function(t){return e.calcularTotal(t)}})]})})]}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Total: \xa0 ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(o)})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)("span",{children:"Valor pago (R$): "}),Object(y.jsx)("input",{className:"border-light rounded text-danger",type:"text",ref:this.valorPago,name:"valorPago",onChange:function(t){return e.calcularTotal(t)}})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Troco: \xa0 ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(l)})]})})})]})})}),Object(y.jsx)("br",{}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.efetuarVenda(t)},children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Incluir produtos"}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-sm-8",children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Codigo de barras"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.codigoBarras,name:"codigoBarras"})]})}),Object(y.jsx)(h.a,{className:"col-sm-4",children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.addItemVenda(t)},children:"Adicionar produto"})]})})]})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Forma de pagamento"}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Formas de pagamento: \xa0"}),Object(y.jsxs)("select",{name:"formaPag",ref:this.formaPag,className:"form-control",children:[Object(y.jsx)("option",{value:"NONE",children:"Selecione uma forma!"},"0"),s.map((function(e,t){return Object(y.jsx)("option",{value:e,children:e},t)}))]})]})})})]})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-sm-6",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)("input",{type:"checkbox",defaultValue:j,onChange:function(t){return e.incluirClienteOnChange(t)}}),"\xa0 Incluir cliente"]}),!0===j&&Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:Object(y.jsx)("h5",{children:"Informe um cliente"})}),Object(y.jsx)($,{referencia:this.clienteNome,itens:d,carregaItens:function(t){return e.clienteNomeOnChange(t)}})]})]})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3 text-left",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.efetuarVenda(t)},children:"Efetuar venda"})})})})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaVendas(t)},children:"Ir para tela de vendas"})})})]})}}]),a}(n.a.Component),ce=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={infoMsg:null,erroMsg:null,venda:{cliente:{pessoa:{}},itens:[]}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/venda/get/"+this.props.vendaId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){alert(JSON.stringify(t)),e.setState({venda:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"paraTelaVendas",value:function(){c.a.render(Object(y.jsx)(oe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoMsg,r=t.erroMsg,n=t.venda;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:"Dados da venda"}),Object(y.jsxs)(Y.d,{children:[Object(y.jsxs)(Y.b,{children:[Object(y.jsx)(Y.a,{children:"Detalhes"}),Object(y.jsx)(Y.a,{children:"Produtos"})]}),Object(y.jsx)(Y.c,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Cliente: "}),Object(y.jsx)("span",{className:"text-success",children:n.cliente.pessoa.nome})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Data de venda: "}),Object(y.jsx)("span",{className:"text-success",children:n.dataVenda})]})}),Object(y.jsxs)(u.a,{className:"mb-2",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Sub total: "}),Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.subtotal)})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Desconto: "}),Object(y.jsxs)("span",{className:"text-danger",children:[g.formataFloat(100*n.desconto)," %"]})]})]}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Total: "}),Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.subtotal*(1-parseFloat(n.desconto)))})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Debito: "}),Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.debito)})]})}),Object(y.jsx)(u.a,{className:"mb-2",children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("span",{className:"font-weight-bold",children:"Forma de pagamento: "}),Object(y.jsx)("span",{className:"text-success",children:n.formaPag})]})})]})}),Object(y.jsx)(Y.c,{children:Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(y.jsx)("th",{children:"Codigo de barras"}),Object(y.jsx)("th",{children:"Valor Unit\xe1rio"}),Object(y.jsx)("th",{children:"Quantidade"}),Object(y.jsx)("th",{children:"Unidade"})]})}),Object(y.jsx)("tbody",{children:n.itens.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.id}),Object(y.jsx)("td",{children:e.produto.descricao}),Object(y.jsx)("td",{children:e.produto.codigoBarras}),Object(y.jsx)("td",{children:g.formataReal(e.precoUnitario)}),Object(y.jsx)("td",{children:g.formataFloat(e.quantidade)}),Object(y.jsx)("td",{children:e.produto.unidade})]},t)}))})]})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:a}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaVendas(t)},children:"Ir para tela de vendas"})})})})]})}}]),a}(n.a.Component),ie=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={infoMsg:null,erroMsg:null,clientes:[],clientesNomeLista:[],clienteId:-1,clienteNome:"",vendas:[],debito:0},r.valorPago=n.a.createRef(),r}return Object(o.a)(a,[{key:"efetuarPagamento",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner();var a=this.state.clienteId;fetch("/api/venda/efetuarecebimento/"+a,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({valor:g.paraFloat(this.valorPago.current.value)})}).then((function(e){200===e.status?(t.valorPago.current.value="",t.carregaVendas(a),t.setState({infoMsg:"Pagamento efetuado com sucesso"})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"clienteNomeItemClicado",value:function(e,t){var a=this.state.clientes[t].clienteId;this.setState({clienteId:a}),this.carregaVendas(a)}},{key:"carregaVendas",value:function(e){var t=this;g.showLoadingSpinner(),this.setState({erroMsg:null,infoMsg:null}),fetch("/api/venda/lista/porcliente/"+e,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){for(var a=e,r=0,n=0;n<a.length;n++){var s=g.paraFloat(a[n].subtotal),c=g.paraFloat(a[n].desconto);a[n].total=s*(1-c),r+=g.paraFloat(a[n].debito)}t.setState({debito:r,vendas:a}),0===e.length&&t.setState({infoMsg:"O cliente est\xe1 adimplente."})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"clienteNomeOnChange",value:function(e){var t=this;fetch("/api/cliente/filtra/limit/5",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:e})}).then((function(e){200===e.status&&e.json().then((function(e){t.setState({clientes:[],clientesNomeLista:[]});for(var a=0;a<e.length;a++)t.state.clientes.push({clienteId:e[a].id,clienteNome:e[a].pessoa.nome}),t.state.clientesNomeLista.push(e[a].pessoa.nome);t.setState({})}))}))}},{key:"paraTelaVendas",value:function(){c.a.render(Object(y.jsx)(oe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoMsg,r=t.erroMsg,n=t.clientesNomeLista,s=t.vendas,c=t.debito;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{className:"text-center",children:"Pagamentos"}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:r}),Object(y.jsx)(N,{cor:"primary",msg:a}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:Object(y.jsx)("h5",{children:"Informe o cliente: "})}),Object(y.jsx)($,{referencia:this.clienteNome,itens:n,carregaItens:function(t){return e.clienteNomeOnChange(t)},itemClicado:function(t,a){return e.clienteNomeItemClicado(t,a)}})]})})}),Object(y.jsx)(h.a,{children:Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)("span",{className:"display-inline",style:{fontSize:"1.6em"},children:["D\xe9bito total: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(c)})]})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{className:"text-center",children:"Lista de vendas"}),Object(y.jsx)("div",{className:"tbl-pnl-pequeno",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Data venda"}),Object(y.jsx)("th",{children:"total"}),Object(y.jsx)("th",{children:"D\xe9bito"})]})}),Object(y.jsx)("tbody",{children:s.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.dataVenda}),Object(y.jsx)("td",{children:g.formataReal(e.total)}),Object(y.jsx)("td",{children:g.formataReal(e.debito)})]},t)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{className:"p-3 col-sm-6",children:[Object(y.jsx)("h4",{children:"Efetuar pagamento"}),Object(y.jsxs)(m.a,{children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Valor pago: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.valorPago,name:"valorPago"})]}),Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.efetuarPagamento(t)},children:"Efetuar pagamento"})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaVendas(t)},children:"Ir para tela de vendas"})})})]})}}]),a}(n.a.Component),oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,vendas:[],dataIni:new Date,dataFim:new Date,remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.incluirCliente=n.a.createRef(),r.clienteNomeIni=n.a.createRef(),r.incluirVendasPagas=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.incluirCliente.current.checked=!1,this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),fetch("/api/venda/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({dataIni:g.formataData(this.state.dataIni),dataFim:g.formataData(this.state.dataFim),incluirCliente:this.incluirCliente.current.checked,clienteNomeIni:this.clienteNomeIni.current.value,incluirPagas:this.incluirVendasPagas.current.checked})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({vendas:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma venda encontrada pelos crit\xe9rios de busca informados!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"changeDataIni",value:function(e){this.setState({dataIni:e})}},{key:"changeDataFim",value:function(e){this.setState({dataFim:e})}},{key:"detalhes",value:function(e,t){c.a.render(Object(y.jsx)(ce,{vendaId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t,a){var r=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/venda/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(r.filtrar(null,!1),r.setState({infoMsg:"Venda deletada com \xeaxito."})):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaPagamentos",value:function(e){c.a.render(Object(y.jsx)(ie,{}),g.paginaElemento())}},{key:"paraRegistroForm",value:function(e){e.preventDefault(),c.a.render(Object(y.jsx)(se,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.vendas,s=t.dataIni,c=t.dataFim,i=t.remocaoModalVisivel,o=t.remocaoModalCancelaFunc,l=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:i,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de venda"})}),Object(y.jsxs)(F.a.Body,{children:["Tem certeza que deseja remover a venda selecionada? ",Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"Aten\xe7\xe3o:"})," Ao escolher remover a venda, esteja ciente que ser\xe1 atualizado o estoque com a adi\xe7\xe3o das unidades de produto componentes da venda!"]}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return o()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return l()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",className:"float-start",onClick:function(t){return e.paraTelaPagamentos(t)},children:"Efetue um pagamento"}),Object(y.jsx)(O.a,{variant:"primary",className:"float-end",onClick:function(t){return e.paraRegistroForm(t)},children:"Registre uma nova venda"})]})})}),Object(y.jsx)("h3",{className:"text-center",children:"Lista de Vendas"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Data venda"}),Object(y.jsx)("th",{children:"Cliente"}),Object(y.jsx)("th",{children:"Total"}),Object(y.jsx)("th",{children:"Debito"}),Object(y.jsx)("th",{children:"Detalhes"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.dataVenda}),Object(y.jsx)("td",{children:t.cliente.pessoa.nome}),Object(y.jsx)("td",{children:g.formataReal(t.subtotal*(1-t.desconto))}),Object(y.jsx)("td",{children:g.formataReal(t.debito)}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.detalhes(a,t.id)},children:"detalhes"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar vendas"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de in\xedcio: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:s,onChange:function(t){return e.changeDataIni(t)},locale:"pt",name:"dataIni",dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de fim: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:c,onChange:function(t){return e.changeDataFim(t)},locale:"pt",name:"dataFim",minDate:s,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirVendasPagas})," \xa0 Incluir vendas pagas"]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-6",children:Object(y.jsx)(m.a.Group,{className:"mb-2",children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a.Label,{children:"Cliente: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.clienteNomeIni,name:"clienteNomeIni"}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirCliente}),"Incluir cliente no filtro"]})})})})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})})})]})]})]})}}]),a}(n.a.Component),le=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.valorInicial=n.a.createRef(),r}return Object(o.a)(a,[{key:"abrir",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null});var a=this.valorInicial.current.value;!0!==isNaN(a)?(g.showLoadingSpinner(),fetch("/api/caixa/abre/"+g.usuario.id,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({lancamento:{tipo:"CREDITO",valor:g.paraFloat(a)}})}).then((function(e){200===e.status?t.setState({infoMsg:"Caixa aberto com sucesso."}):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))):this.setState({erroMsg:"Valor inicial em formato inv\xe1lido."})}},{key:"paraTelaCaixa",value:function(){c.a.render(Object(y.jsx)(ue,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsx)(j.a,{children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Abertura de caixa"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.abrir(t,!0)},children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-6",children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Valor inicial: "}),Object(y.jsx)(m.a.Control,{type:"number",step:"0.01",ref:this.valorInicial,name:"valorInicial"})]})})}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Abrir caixa"})})})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaCaixa()},children:"Ir para tela caixa"})})})})]})})})}}]),a}(n.a.Component),de=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,tipos:[]},r.tipo=n.a.createRef(),r.valor=n.a.createRef(),r.obs=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.carregaTipos(),this.valor.current.value="",this.obs.current.value=""}},{key:"carregaTipos",value:function(){var e=this;g.showLoadingSpinner(),fetch("/api/lancamento/tipos",{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({tipos:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"novo",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),fetch("/api/lancamento/novo/hoje/"+g.usuario.id,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({tipo:this.tipo.current.value,valor:g.paraFloat(this.valor.current.value),obs:this.obs.current.value})}).then((function(e){200===e.status?t.setState({infoMsg:"Lan\xe7amento efetuado com sucesso."}):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaLancamentos",value:function(){c.a.render(Object(y.jsx)(je,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.tipos;return Object(y.jsx)(j.a,{children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-3"}),Object(y.jsxs)(h.a,{className:"col-md-6",children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Registre um lan\xe7amento"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.novo(t)},children:[Object(y.jsxs)(m.a.Group,{className:"py-2 pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Tipo: \xa0 "}),Object(y.jsxs)("select",{name:"tipo",ref:this.tipo,children:[Object(y.jsx)("option",{value:"NONE",children:"Selecione um tipo!"},"0"),n.map((function(e,t){return Object(y.jsx)("option",{value:e,children:e},t+1)}))]})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Valor: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.valor,name:"valor"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Observa\xe7\xf5es: "}),Object(y.jsx)(m.a.Control,{as:"textarea",rows:"3",ref:this.obs})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Registrar novo"})]}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaLancamentos()},children:"Ir para lan\xe7amentos"})})})})]})]})})}}]),a}(n.a.Component),je=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,lancamentos:[],caixaFuncNome:null,caixaDataAbertura:null,remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.listar(null,!1)}},{key:"listar",value:function(e,t){var a,r=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),a="caixaid"===this.props.getTipo?"/api/caixa/get/"+this.props.caixaId:"/api/caixa/get/uid/hoje/"+g.usuario.id,fetch(a,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?e.json().then((function(e){r.setState({lancamentos:[]});for(var a=e,n=0,s=0,c=0;c<a.lancamentos.length;c++){var i=a.lancamentos[c],o=0,l=0;"CREDITO"===i.tipo?l=g.paraFloat(i.valor):"DEBITO"===i.tipo&&(o=g.paraFloat(i.valor));var d=(n+=l)-(s+=o);r.state.lancamentos.push({id:i.id,dataOperacao:i.dataOperacao,obs:i.obs,debito:o,credito:l,saldo:d})}r.setState({caixaFuncNome:a.funcionario.pessoa.nome,caixaDataAbertura:a.dataAbertura}),0===e.length&&!0===t&&r.setState({infoMsg:"Nenhum lan\xe7amento at\xe9 agora"})})):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/lancamento/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?a.listar(e,!1):g.trataRespostaNaoOk(t,a),g.hideLoadingSpinner()}))}},{key:"paraTelaRegistro",value:function(){c.a.render(Object(y.jsx)(de,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.lancamentos,s=t.caixaFuncNome,c=t.caixaDataAbertura,i=t.remocaoModalVisivel,o=t.remocaoModalCancelaFunc,l=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:i,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de lan\xe7amentos"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o lan\xe7amento?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return o()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return l()},children:"Remover"})]})})]}),"caixaid"!==this.props.gettipo&&Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaRegistro()},children:"Novo lan\xe7amento"})}),Object(y.jsx)("br",{}),Object(y.jsxs)(m.a.Group,{style:{fontSize:"1.2em"},children:[Object(y.jsxs)(m.a.Label,{children:["Funcionario: \xa0 ",Object(y.jsx)("span",{className:"text-primary",children:s})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(m.a.Label,{children:["Data abertura do caixa: \xa0 ",Object(y.jsx)("span",{className:"text-primary",children:c})]})]}),Object(y.jsx)("h4",{className:"text-center",children:"Lan\xe7amentos"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Data opera\xe7\xe3o"}),Object(y.jsx)("th",{children:"Entrada"}),Object(y.jsx)("th",{children:"Saida"}),Object(y.jsx)("th",{children:"Saldo"}),Object(y.jsx)("th",{children:"Obs"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.dataOperacao}),Object(y.jsx)("td",{children:g.formataReal(t.credito)}),Object(y.jsx)("td",{children:g.formataReal(t.debito)}),Object(y.jsx)("td",{children:g.formataReal(t.saldo)}),Object(y.jsx)("td",{children:t.obs}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.listar(t,!0)},children:"Atualizar lista"})})})]})}}]),a}(n.a.Component),ue=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,balanco:{valor:0,debito:0,credito:0,saldo:0}},r.valorFechamento=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.atualizaDadosHoje()}},{key:"atualizaDadosHoje",value:function(){var e=this;this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/caixa/balanco/hoje/"+g.usuario.id,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.setState({balanco:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"fecharCaixa",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/caixa/fecha/"+g.usuario.id,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({lancamento:{tipo:"DEBITO",valor:g.paraFloat(this.valorFechamento.current.value)}})}).then((function(e){200===e.status?(t.valorFechamento.current.value="",t.atualizaDadosHoje()):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaAbrirCaixa",value:function(e){c.a.render(Object(y.jsx)(le,{}),g.paginaElemento())}},{key:"paraTelaLancamentos",value:function(e){c.a.render(Object(y.jsx)(je,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.balanco;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaAbrirCaixa(t)},children:"Abrir caixa"})})})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",style:{fontSize:"1.2em"},children:[Object(y.jsx)("h4",{children:"Dados do caixa"}),Object(y.jsxs)("div",{className:"p-3",children:[Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Data de abertura: ",Object(y.jsx)("span",{className:"text-danger",children:n.dataAbertura})]}),Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Credito: ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.credito)})]}),Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Debito: ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.debito)})]}),Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Saldo: ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.saldo)})]}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Valor recebido no cart\xe3o: ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.cartaoValorRecebido)})]}),Object(y.jsxs)("div",{className:"display-inline mb-2",children:["Total de vendas a prazo: ",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.totalVendasAPrazo)})]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.atualizaDadosHoje(t)},children:"Atualizar dados"}),Object(y.jsx)(O.a,{variant:"primary",className:"mx-2",onClick:function(t){return e.paraTelaLancamentos(t)},children:"Lan\xe7amentos"})]})})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Fechar caixa"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.fecharCaixa(t)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Informe o valor em caixa: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.valorFechamento,name:"valorFechamento"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Fechar caixa"})]})]})})]})]})}}]),a}(n.a.Component),he=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,caixas:[]},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.filtrar()}},{key:"filtrar",value:function(){var e=this;this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),fetch("/api/caixa/lista/pordatadia",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({dataDia:this.props.dataDia})}).then((function(t){200===t.status?t.json().then((function(t){for(var a=0;a<t.length;a++){for(var r=t[a],n=0,s=0,c=0;c<r.lancamentos.length;c++){var i=r.lancamentos[c];"CREDITO"===i.tipo?s+=g.paraFloat(i.valor):"DEBITO"===i.tipo&&(n+=g.paraFloat(i.valor))}var o=s-n;e.state.caixas.push({id:r.id,dataAbertura:r.dataAbertura,funcionarioNome:r.funcionario.pessoa.nome,debito:n,credito:s,saldo:o}),e.setState({})}0===t.length&&e.setState({infoMsg:"Nenhum fluxo de caixa encontrado pelos crit\xe9rios de busca informados"})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"paraTelaLancamentos",value:function(e,t){c.a.render(Object(y.jsx)(je,{getTipo:"caixaid",caixaId:t}),g.paginaElemento())}},{key:"relatorioBalancoHoje",value:function(e){window.open("/api/relatorio/balanco-hoje")}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.caixas;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{className:"float-end",variant:"primary",onClick:function(t){return e.relatorioBalancoHoje(t)},children:"Gerar balan\xe7o de hoje"})}),Object(y.jsx)("br",{}),Object(y.jsx)("h4",{className:"text-center",children:"Fluxo de caixa por dia"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Respons\xe1vel"}),Object(y.jsx)("th",{children:"Data de abertura"}),Object(y.jsx)("th",{children:"Entrada"}),Object(y.jsx)("th",{children:"Saida"}),Object(y.jsx)("th",{children:"Saldo"}),Object(y.jsx)("th",{children:"Visualizar lan\xe7amentos"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.funcionarioNome}),Object(y.jsx)("td",{children:t.dataAbertura}),Object(y.jsx)("td",{children:g.formataReal(t.credito)}),Object(y.jsx)("td",{children:g.formataReal(t.debito)}),Object(y.jsx)("td",{children:g.formataReal(t.saldo)}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.paraTelaLancamentos(a,t.id)},children:"visualizar"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r})]})}}]),a}(n.a.Component),be=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,dataIni:new Date,dataFim:new Date,balancosDiarios:[]},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.filtrar(null)}},{key:"filtrar",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({infoMsg:null,erroMsg:null}),g.showLoadingSpinner(),fetch("/api/caixa/gera/balancos/diarios",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({dataIni:g.formataData(this.state.dataIni),dataFim:g.formataData(this.state.dataFim)})}).then((function(e){200===e.status?e.json().then((function(e){t.setState({balancosDiarios:e}),0===e.length&&t.setState({infoMsg:"Nenhum fluxo de caixa encontrado pelos crit\xe9rios de busca informados"})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"dataIniOnChange",value:function(e){this.setState({dataIni:e})}},{key:"dataFimOnChange",value:function(e){this.setState({dataFim:e})}},{key:"visualizar",value:function(e,t){c.a.render(Object(y.jsx)(he,{dataDia:t}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.balancosDiarios,s=t.dataIni,c=t.dataFim;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Fluxo de caixa"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Data de abertura"}),Object(y.jsx)("th",{children:"Entrada"}),Object(y.jsx)("th",{children:"Saida"}),Object(y.jsx)("th",{children:"Saldo"}),Object(y.jsx)("th",{children:"Visualizar"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.dataAbertura}),Object(y.jsx)("td",{children:g.formataReal(t.credito)}),Object(y.jsx)("td",{children:g.formataReal(t.debito)}),Object(y.jsx)("td",{children:g.formataReal(t.saldo)}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.visualizar(a,t.dataAbertura)},children:"visualizar"})})]},a)}))})]})})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-sm-10",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar"}),Object(y.jsx)(m.a,{onSubmit:function(t){return e.filtrar(t)},children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de in\xedcio: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:s,onChange:function(t){return e.dataIniOnChange(t)},locale:"pt",name:"dataIni",dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de fim: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:c,onChange:function(t){return e.dateFimOnChange(t)},locale:"pt",name:"dataFim",minDate:s,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})})]})})]})})})]})}}]),a}(n.a.Component),me=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,grupo:{permissaoGrupos:[]}},r.nome=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.carregar()}},{key:"carregar",value:function(){var e=this;this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/get/"+this.props.grupoId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.nome.current.value=t.nome,e.setState({grupo:t})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"salvar",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/atualiza/"+this.props.grupoId,{method:"PUT",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nome:this.nome.current.value})}).then((function(e){200===e.status?t.setState({infoMsg:"Grupo salvo com sucesso."}):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"sincronizarRecursos",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/recursos/sincroniza/"+this.props.grupoId,{method:"POST",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(t.carregar(),t.setState({infoMsg:"Recursos sincronizados com sucesso."})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"permissaoLeituraOnChange",value:function(e,t){this.permissaoOnChange(e,t,"LEITURA")}},{key:"permissaoEscritaOnChange",value:function(e,t){this.permissaoOnChange(e,t,"ESCRITA")}},{key:"permissaoRemocaoOnChange",value:function(e,t){this.permissaoOnChange(e,t,"REMOCAO")}},{key:"permissaoOnChange",value:function(e,t,a){var r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/permissao/salva/"+t,{method:"PATCH",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({tipo:a,valor:e.target.checked})}).then((function(e){200===e.status?r.carregar():g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaGrupos",value:function(){c.a.render(Object(y.jsx)(pe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.grupo;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Registro de grupos"}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Nome: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nome,name:"nome"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})]})})]})]})})})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",className:"float-end",onClick:function(t){return e.sincronizarRecursos(t)},children:"Sincronizar Recursos"})})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Permiss\xf5es sobre recursos"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Recurso"}),Object(y.jsx)("th",{children:"Leitura"}),Object(y.jsx)("th",{children:"Escrita"}),Object(y.jsx)("th",{children:"Remo\xe7\xe3o"})]})}),Object(y.jsx)("tbody",{children:n.permissaoGrupos.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.recurso}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"checkbox",checked:"true"===t.leitura,onChange:function(a){return e.permissaoLeituraOnChange(a,t.id)}})}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"checkbox",checked:"true"===t.escrita,onChange:function(a){return e.permissaoEscritaOnChange(a,t.id)}})}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"checkbox",checked:"true"===t.remocao,onChange:function(a){return e.permissaoRemocaoOnChange(a,t.id)}})})]},a)}))})]})})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaGrupos(t)},children:"Ir para grupos"})})})})]})}}]),a}(n.a.Component),Oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null},r.nome=n.a.createRef(),r}return Object(o.a)(a,[{key:"salvar",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/registra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nome:this.nome.current.value})}).then((function(e){200===e.status?t.setState({infoMsg:"Grupo salvo com sucesso."}):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaGrupos",value:function(){c.a.render(Object(y.jsx)(pe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Registro de grupos"}),Object(y.jsx)("br",{}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{className:"col-md-2"}),Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Nome: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nome,name:"nome"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaGrupos(t)},children:"Ir para grupos"})})})})]})]})]})}}]),a}(n.a.Component),pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,grupos:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.nomeIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.nomeIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:this.nomeIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({grupos:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhum grupo registrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e,t){e.preventDefault(),c.a.render(Object(y.jsx)(me,{grupoId:t}),g.paginaElemento())}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/grupo/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Grupo removido com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"paraTelaRegistro",value:function(){c.a.render(Object(y.jsx)(Oe,{}),g.paginaElemento())}},{key:"paraTelaUsuarios",value:function(){c.a.render(Object(y.jsx)(ge,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.grupos,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de grupo"})}),Object(y.jsx)(F.a.Body,{children:"Tem certeza que deseja remover o grupo selecionado?"}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{className:"float-end",children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaRegistro(t)},children:"Registrar novo grupo"})})})}),Object(y.jsx)("h4",{className:"text-center",children:"Lista de Grupos"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Nome"}),Object(y.jsx)("th",{children:"Editar"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.nome}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.editar(a,t.id)},children:"editar"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar grupos"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome:"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nomeIni,name:"nomeIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",className:"mb-3",children:"Filtrar"})]})]})})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaUsuarios(t)},children:"Ir para usu\xe1rios"})})})})]})}}]),a}(n.a.Component),xe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,titulo:""},r.nome=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"editar"===this.props.op?(this.setState({titulo:"Altera\xe7\xe3o de usu\xe1rio"}),this.carregar()):this.setState({titulo:"Registro de usu\xe1rio"})}},{key:"carregar",value:function(){var e=this;this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/recurso/get/"+this.props.recursoId,{method:"GET",headers:{Authorization:"Bearer "+g.token}}).then((function(t){200===t.status?t.json().then((function(t){e.nome.current.value=t.nome,e.setState({})})):g.trataRespostaNaoOk(t,e),g.hideLoadingSpinner()}))}},{key:"salvar",value:function(e){var t,a,r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),"editar"===this.props.op?(t="/api/recurso/atualiza/"+this.props.recursoId,a="PUT"):(t="/api/recurso/registra",a="POST"),g.showLoadingSpinner(),fetch(t,{method:a,headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nome:this.nome.current.value})}).then((function(e){200===e.status?r.setState({infoMsg:"Recurso salvo com sucesso."}):g.trataRespostaNaoOk(e,r),g.hideLoadingSpinner()}))}},{key:"paraTelaRecursos",value:function(){c.a.render(Object(y.jsx)(fe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.titulo;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:n}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsxs)(m.a,{onSubmit:function(t){return e.salvar(t)},children:[Object(y.jsx)("h4",{className:"card-title",children:"Dados gerais"}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"Nome: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nome,name:"nome"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Salvar"})]})})]})]})})})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaRecursos(t)},children:"Ir para recursos"})})})})]})}}]),a}(n.a.Component),fe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,recursos:[],remocaoModalVisivel:!1,remocaoModalOkFunc:function(){},remocaoModalCancelaFunc:function(){}},r.nomeIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.nomeIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/recurso/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({nomeIni:this.nomeIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({recursos:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhum recurso registrado!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"removerSeConfirmado",value:function(e,t){var a=this;this.setState({remocaoModalVisivel:!0,remocaoModalOkFunc:function(){a.setState({remocaoModalVisivel:!1}),a.remover(e,t)},remocaoModalCancelaFunc:function(){a.setState({remocaoModalVisivel:!1})}})}},{key:"remover",value:function(e,t){var a=this;e.preventDefault(),g.showLoadingSpinner(),fetch("/api/recurso/deleta/"+t,{method:"DELETE",headers:{Authorization:"Bearer "+g.token}}).then((function(e){200===e.status?(a.filtrar(null,!1),a.setState({infoMsg:"Recurso removido com \xeaxito!"})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"editar",value:function(e,t){c.a.render(Object(y.jsx)(xe,{op:"editar",recursoId:t}),g.paginaElemento())}},{key:"paraRecursoForm",value:function(e){c.a.render(Object(y.jsx)(xe,{op:"cadastrar"}),g.paginaElemento())}},{key:"paraTelaUsuarios",value:function(e){c.a.render(Object(y.jsx)(ge,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.recursos,s=t.remocaoModalVisivel,c=t.remocaoModalCancelaFunc,i=t.remocaoModalOkFunc;return Object(y.jsxs)(j.a,{children:[Object(y.jsxs)(F.a,{show:s,children:[Object(y.jsx)(F.a.Header,{children:Object(y.jsx)(F.a.Title,{children:"Remo\xe7\xe3o de recurso"})}),Object(y.jsxs)(F.a.Body,{children:["Tem certeza que deseja remover o recurso selecionado? ",Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),"Se optar por remover o recurso, ser\xe3o removidas tamb\xe9m as permiss\xf5es do recurso concedidas a grupos de usu\xe1rios!"]}),Object(y.jsx)(F.a.Footer,{children:Object(y.jsxs)(m.a,{children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(e){return c()},children:"Cancelar"}),Object(y.jsx)(O.a,{variant:"danger",className:"mx-2",onClick:function(e){return i()},children:"Remover"})]})})]}),Object(y.jsx)(m.a,{children:Object(y.jsx)(O.a,{variant:"primary",className:"float-end",onClick:function(t){return e.paraRecursoForm(t)},children:"Registrar recurso"})}),Object(y.jsx)("br",{}),Object(y.jsx)("h3",{className:"text-center",children:"Lista de recursos"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Nome"}),Object(y.jsx)("th",{children:"Editar"}),Object(y.jsx)("th",{children:"Remover"})]})}),Object(y.jsx)("tbody",{children:n.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.id}),Object(y.jsx)("td",{children:t.nome}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.editar(a,t.id)},children:"editar"})}),Object(y.jsx)("td",{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(a){return e.removerSeConfirmado(a,t.id)},children:"remover"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{className:"col-md-8",children:[Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar recursos"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome do recurso: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.nomeIni,name:"nomeIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("button",{className:"btn btn-link p-0",onClick:function(t){return e.paraTelaUsuarios(t)},children:"Ir para usu\xe1rios"})})})})]})})]})}}]),a}(n.a.Component),ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,usuarios:[]},r.usernameIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.usernameIni.current.value="*",this.filtrar(null,!1)}},{key:"filtrar",value:function(e){var t=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/usuario/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({usernameIni:this.usernameIni.current.value})}).then((function(e){200===e.status?e.json().then((function(e){t.setState({usuarios:e}),0===e.length&&t.setState({infoMsg:"Nenhum usuario registrado!"})})):g.trataRespostaNaoOk(e,t),g.hideLoadingSpinner()}))}},{key:"paraTelaGrupos",value:function(e){c.a.render(Object(y.jsx)(pe,{}),g.paginaElemento())}},{key:"paraTelaRecursos",value:function(e){c.a.render(Object(y.jsx)(fe,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.usuarios;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a,{className:"float-start",children:[Object(y.jsx)(O.a,{variant:"primary",onClick:function(t){return e.paraTelaGrupos(t)},children:"Grupos de usu\xe1rio"}),Object(y.jsx)(O.a,{variant:"primary",className:"mx-2",onClick:function(t){return e.paraTelaRecursos(t)},children:"Recursos"})]})})}),Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de Usuarios"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Username"}),Object(y.jsx)("th",{children:"Grupo"})]})}),Object(y.jsx)("tbody",{children:n.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.id}),Object(y.jsx)("td",{children:e.username}),Object(y.jsx)("td",{children:e.grupo.nome})]},t)}))})]})})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar usuarios"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome de usu\xe1rio: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.usernameIni,name:"usernameIni"})]}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})})})]})}}]),a}(n.a.Component),ve=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,dataIni:new Date,dataFim:new Date,contasObj:{contas:[]}},r.incluirFornecedor=n.a.createRef(),r.fornecedorNomeIni=n.a.createRef(),r.incluirContasPagas=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.filtrar(null,!1),this.setState({dataFim:(new Date).getTime()+31536e6})}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/conta/pagar/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({incluirPagas:this.incluirContasPagas.current.checked,incluirFornecedor:this.incluirFornecedor.current.checked,fornecedorNomeIni:this.fornecedorNomeIni.current.value,dataIni:g.formataData(this.state.dataIni),dataFim:g.formataData(this.state.dataFim)})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({contasObj:e}),0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma conta encontrada pelos crit\xe9rios de filtro informados!"})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"alterarSituacao",value:function(e,t,a){var r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null});var n=this.state.contasObj.contas[t].parcela.paga;g.showLoadingSpinner(),fetch("/api/conta/pagar/altera/situacao/"+a,{method:"PATCH",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({paga:"true"!==n})}).then((function(t){200===t.status?r.filtrar(e,!1):g.trataRespostaNaoOk(t,r),g.hideLoadingSpinner()}))}},{key:"changeDataIni",value:function(e){this.setState({dataIni:e})}},{key:"changeDataFim",value:function(e){this.setState({dataFim:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.contasObj,s=t.dataIni,c=t.dataFim;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de contas a pagar"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Data pagamento"}),Object(y.jsx)("th",{children:"Data vencimento"}),Object(y.jsx)("th",{children:"Fornecedor"}),Object(y.jsx)("th",{children:"Alterar status"})]})}),Object(y.jsx)("tbody",{children:n.contas.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.parcela.dataPagamento}),Object(y.jsx)("td",{children:t.parcela.dataVencimento}),Object(y.jsx)("td",{children:t.fornecedorEmpresa}),Object(y.jsx)("td",{children:Object(y.jsx)(O.a,{variant:"primary",onClick:function(r){return e.alterarSituacao(r,a,t.parcela.id)},children:"true"===t.parcela.paga?"Desfazer pagamento":"Pagar"})})]},a)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a.Group,{style:{fontSize:"1.6em"},children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["D\xe9bito: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.debitoTotalPeriodo)})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["D\xe9bito total: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.debitoTotalCompleto)})]})})]})})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar contas a pagar"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de in\xedcio: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:s,onChange:function(t){return e.changeDataIni(t)},locale:"pt",name:"dataIni",dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"pb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de fim: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:c,onChange:function(t){return e.changeDataFim(t)},locale:"pt",name:"dataFim",minDate:s,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirContasPagas})," \xa0 Incluir contas pagas"]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a.Group,{className:"mb-2",children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a.Label,{children:"Fornecedor: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.fornecedorNomeIni,name:"fornecedorNomeIni"}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirFornecedor}),"Incluir fornecedor no filtro"]})})})})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})})})]})]})})})]})}}]),a}(n.a.Component),ye=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null,infoMsg:null,dataIni:new Date,dataFim:new Date,contasObj:{vendas:[]},debitoPeriodo:0,debitoTotal:0},r.valorRecebido=n.a.createRef(),r.incluirContasPagas=n.a.createRef(),r.incluirCliente=n.a.createRef(),r.clienteNomeIni=n.a.createRef(),r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.filtrar(null,!1),this.setState({dataFim:(new Date).getTime()+31536e6})}},{key:"filtrar",value:function(e,t){var a=this;null!=e&&e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/conta/receber/filtra",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({incluirPagas:this.incluirContasPagas.current.checked,incluirCliente:this.incluirCliente.current.checked,clienteNomeIni:this.clienteNomeIni.current.value,dataIni:g.formataData(this.state.dataIni),dataFim:g.formataData(this.state.dataFim)})}).then((function(e){200===e.status?e.json().then((function(e){for(var r=e,n=0;n<r.vendas.length;n++){var s=g.paraFloat(r.vendas[n].subtotal),c=g.paraFloat(r.vendas[n].desconto);r.vendas[n].total=s*(1-c)}0===e.length&&!0===t&&a.setState({infoMsg:"Nenhuma conta encontrada pelos crit\xe9rios de filtro informados!"}),a.setState({contasObj:r})})):g.trataRespostaNaoOk(e,a),g.hideLoadingSpinner()}))}},{key:"efetuarRecebimento",value:function(e,t,a){var r=this;e.preventDefault(),this.setState({erroMsg:null,infoMsg:null}),g.showLoadingSpinner(),fetch("/api/conta/receber/efetuarecebimento/"+a,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+g.token},body:JSON.stringify({valorRecebido:this.valorRecebido.current.value})}).then((function(t){200===t.status?r.filtrar(e,!1):g.trataRespostaNaoOk(t,r),g.hideLoadingSpinner()}))}},{key:"changeDataIni",value:function(e){this.setState({dataIni:e})}},{key:"changeDataFim",value:function(e){this.setState({dataFim:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.erroMsg,r=t.infoMsg,n=t.contasObj,s=t.dataIni,c=t.dataFim;return Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h4",{className:"text-center",children:"Lista de contas a pagar"}),Object(y.jsx)("div",{className:"tbl-pnl",children:Object(y.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Data de venda"}),Object(y.jsx)("th",{children:"Cliente"}),Object(y.jsx)("th",{children:"Total"}),Object(y.jsx)("th",{children:"D\xe9bito"})]})}),Object(y.jsx)("tbody",{children:n.vendas.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.dataVenda}),Object(y.jsx)("td",{children:e.cliente.pessoa.nome}),Object(y.jsx)("td",{children:g.formataReal(e.total)}),Object(y.jsx)("td",{children:g.formataReal(e.debito)})]},t)}))})]})}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{className:"p-3",children:Object(y.jsx)(m.a.Group,{style:{fontSize:"1.6em"},children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Valor a receber: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.totalPeriodo)})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Label,{children:["Valor a receber total: \xa0",Object(y.jsx)("span",{className:"text-danger",children:g.formataReal(n.totalCompleto)})]})})]})})}),Object(y.jsx)("br",{}),Object(y.jsx)(N,{cor:"danger",msg:a}),Object(y.jsx)(N,{cor:"primary",msg:r}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{className:"col-md-8",children:Object(y.jsxs)(b.a,{className:"p-3",children:[Object(y.jsx)("h4",{children:"Filtrar contas receber"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.filtrar(t,!0)},children:[Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de in\xedcio: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:s,onChange:function(t){return e.changeDataIni(t)},locale:"pt",name:"dataIni",dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"Data de fim: "}),Object(y.jsx)("br",{}),Object(y.jsx)(H.a,{selected:c,onChange:function(t){return e.changeDataFim(t)},locale:"pt",name:"dataFim",minDate:s,dateFormat:"dd/MM/yyyy",className:"form-control"})]})}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(m.a.Group,{className:"mb-2",children:[Object(y.jsx)(m.a.Label,{children:"\xa0"}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirContasPagas})," \xa0 Incluir contas pagas"]})})]}),Object(y.jsx)(u.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a.Group,{className:"mb-2",children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsx)(m.a.Label,{children:"Cliente: "}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.clienteNomeIni,name:"clienteNomeIni"}),Object(y.jsx)("input",{className:"my-2",type:"checkbox",ref:this.incluirCliente}),"Incluir cliente no filtro"]})})})})}),Object(y.jsx)(O.a,{type:"submit",variant:"primary",children:"Filtrar"})]})]})})})]})}}]),a}(n.a.Component),Ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"mostraEscondeMenu",value:function(e){g.showHide(e),this.setState(this.state)}},{key:"paraTelaLogin",value:function(){c.a.render(Object(y.jsx)(Ce,{}),g.rootElemento())}},{key:"paraTelaSedeDetalhes",value:function(){c.a.render(Object(y.jsx)(R,{}),g.paginaElemento())}},{key:"paraTelaFuncionarios",value:function(){c.a.render(Object(y.jsx)(E,{}),g.paginaElemento())}},{key:"paraTelaFornecedores",value:function(){c.a.render(Object(y.jsx)(B,{}),g.paginaElemento())}},{key:"paraTelaProdutos",value:function(){c.a.render(Object(y.jsx)(J,{}),g.paginaElemento())}},{key:"paraTelaCategorias",value:function(){c.a.render(Object(y.jsx)(q,{}),g.paginaElemento())}},{key:"paraTelaCompras",value:function(){c.a.render(Object(y.jsx)(te,{}),g.paginaElemento())}},{key:"paraTelaClientes",value:function(){c.a.render(Object(y.jsx)(ne,{}),g.paginaElemento())}},{key:"paraTelaVendas",value:function(){c.a.render(Object(y.jsx)(oe,{}),g.paginaElemento())}},{key:"paraTelaCaixa",value:function(){c.a.render(Object(y.jsx)(ue,{}),g.paginaElemento())}},{key:"paraTelaFluxoCaixa",value:function(){c.a.render(Object(y.jsx)(be,{}),g.paginaElemento())}},{key:"paraTelaContasPagar",value:function(){c.a.render(Object(y.jsx)(ve,{}),g.paginaElemento())}},{key:"paraTelaContasReceber",value:function(){c.a.render(Object(y.jsx)(ye,{}),g.paginaElemento())}},{key:"paraTelaUsuarios",value:function(){c.a.render(Object(y.jsx)(ge,{}),g.paginaElemento())}},{key:"render",value:function(){var e=this;return Object(y.jsxs)(C.a,{bg:"dark",variant:"dark",children:[Object(y.jsx)(C.a.Brand,{className:"mx-3",children:"Sistema ERP"}),Object(y.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsx)(C.a.Collapse,{id:"basic-navbar.nav",children:Object(y.jsxs)(S.a,{className:"mr-auto",children:["CAIXA"===g.usuario.grupo.nome&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaCaixa()},children:"Caixa"}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsxs)(M.a,{title:"Financeiro",children:[Object(y.jsx)(M.a.Item,{onClick:function(){return e.paraTelaFluxoCaixa()},children:"Fluxo de Caixa"}),"GERENTE"===g.usuario.grupo.nome&&Object(y.jsx)(M.a.Item,{onClick:function(){return e.paraTelaContasPagar()},children:"Contas a pagar"}),"GERENTE"===g.usuario.grupo.nome&&Object(y.jsx)(M.a.Item,{onClick:function(){return e.paraTelaContasReceber()},children:"Contas a receber"})]}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaSedeDetalhes()},children:"Sede"}),"ADMIN"!==g.usuario.grupo.nome&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaVendas()},children:"Vendas"}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaCompras()},children:"Compras"}),"ADMIN"!==g.usuario.grupo.nome&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaProdutos()},children:"Produtos"}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaFuncionarios()},children:"Funcionarios"}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaClientes()},children:"Clientes"}),("SUPERVISOR"===g.usuario.grupo.nome||"GERENTE"===g.usuario.grupo.nome)&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaFornecedores()},children:"Fornecedores"}),"ADMIN"===g.usuario.grupo.nome&&Object(y.jsx)(S.a.Link,{onClick:function(){return e.paraTelaUsuarios()},children:"Usuarios"}),Object(y.jsx)(S.a.Link,{className:"float-end",onClick:function(){return e.paraTelaLogin()},children:"Sair"})]})})]})}}]),a}(n.a.Component),ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null},r}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.erroMsg;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:"Bem vindo"}),Object(y.jsxs)("p",{children:["Ol\xe1 ",g.usuario.username,", seja bem vindo"]}),Object(y.jsx)(N,{cor:"danger",msg:e})]})}}]),a}(n.a.Component),Ce=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={erroMsg:null},r.username=n.a.createRef(),r.password=n.a.createRef(),r}return Object(o.a)(a,[{key:"entrar",value:function(e){var t=this;e.preventDefault(),this.setState({erroMsg:null}),fetch("/api/login/entrar",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({username:this.username.current.value,password:this.password.current.value})}).then((function(e){200===e.status?e.json().then((function(e){g.token=e.token,g.usuario=e.usuario,c.a.render(Object(y.jsx)(k,{}),g.rootElemento()),c.a.render(Object(y.jsx)(Ne,{}),g.menuNavegElemento()),c.a.render(Object(y.jsx)(ke,{}),g.paginaElemento())})):g.trataRespostaNaoOk(e,t)}))}},{key:"render",value:function(){var e=this,t=this.state.erroMsg;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{className:"text-center bg-dark text-white p-4",children:"Sistema ERP"}),Object(y.jsx)(j.a,{className:"my-5",children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(h.a,{}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(b.a,{body:!0,children:[Object(y.jsx)("h4",{className:"card-title",children:"Tela de login"}),Object(y.jsxs)(m.a,{onSubmit:function(t){return e.entrar(t)},children:[Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Nome de usu\xe1rio"}),Object(y.jsx)(m.a.Control,{type:"text",ref:this.username,id:"username",name:"username"})]}),Object(y.jsxs)(m.a.Group,{className:"mb-3",children:[Object(y.jsx)(m.a.Label,{children:"Senha"}),Object(y.jsx)(m.a.Control,{type:"password",ref:this.password,id:"password",name:"password"})]}),Object(y.jsx)(m.a.Group,{className:"mb-3",children:Object(y.jsx)(O.a,{type:"submit",color:"primary",children:"Entrar"})}),Object(y.jsx)(m.a.Group,{className:"mb-3",children:Object(y.jsx)(N,{cor:"danger",msg:t})})]})]})}),Object(y.jsx)(h.a,{})]})})]})}}]),a}(n.a.Component),Se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(Ce,{})})}}]),a}(n.a.Component),Me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,225)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},Te=a(135);a(201),a(202),a(203),a(204);Object(Q.registerLocale)("pt",Te.a),c.a.render(Object(y.jsx)(n.a.Fragment,{children:Object(y.jsx)(Se,{})}),document.getElementById("root")),Me()}},[[205,1,2]]]);
//# sourceMappingURL=main.e2cad9e9.chunk.js.map